{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = createAutocompleteSource;\n\nvar _configure = _interopRequireDefault(require(\"./configure\"));\n\nvar _formatHit = _interopRequireDefault(require(\"./formatHit\"));\n\nvar _version = _interopRequireDefault(require(\"./version\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction createAutocompleteSource(_ref) {\n  var algoliasearch = _ref.algoliasearch,\n      clientOptions = _ref.clientOptions,\n      apiKey = _ref.apiKey,\n      appId = _ref.appId,\n      hitsPerPage = _ref.hitsPerPage,\n      postcodeSearch = _ref.postcodeSearch,\n      aroundLatLng = _ref.aroundLatLng,\n      aroundRadius = _ref.aroundRadius,\n      aroundLatLngViaIP = _ref.aroundLatLngViaIP,\n      insideBoundingBox = _ref.insideBoundingBox,\n      insidePolygon = _ref.insidePolygon,\n      getRankingInfo = _ref.getRankingInfo,\n      countries = _ref.countries,\n      formatInputValue = _ref.formatInputValue,\n      _ref$computeQueryPara = _ref.computeQueryParams,\n      computeQueryParams = _ref$computeQueryPara === void 0 ? function (params) {\n    return params;\n  } : _ref$computeQueryPara,\n      _ref$useDeviceLocatio = _ref.useDeviceLocation,\n      useDeviceLocation = _ref$useDeviceLocatio === void 0 ? false : _ref$useDeviceLocatio,\n      _ref$language = _ref.language,\n      language = _ref$language === void 0 ? navigator.language.split('-')[0] : _ref$language,\n      _ref$onHits = _ref.onHits,\n      onHits = _ref$onHits === void 0 ? function () {} : _ref$onHits,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (e) {\n    throw e;\n  } : _ref$onError,\n      onRateLimitReached = _ref.onRateLimitReached,\n      onInvalidCredentials = _ref.onInvalidCredentials,\n      type = _ref.type;\n  var placesClient = algoliasearch.initPlaces(appId, apiKey, clientOptions);\n  placesClient.as.addAlgoliaAgent(\"Algolia Places \".concat(_version[\"default\"]));\n  var configuration = (0, _configure[\"default\"])({\n    hitsPerPage: hitsPerPage,\n    type: type,\n    postcodeSearch: postcodeSearch,\n    countries: countries,\n    language: language,\n    aroundLatLng: aroundLatLng,\n    aroundRadius: aroundRadius,\n    aroundLatLngViaIP: aroundLatLngViaIP,\n    insideBoundingBox: insideBoundingBox,\n    insidePolygon: insidePolygon,\n    getRankingInfo: getRankingInfo,\n    formatInputValue: formatInputValue,\n    computeQueryParams: computeQueryParams,\n    useDeviceLocation: useDeviceLocation,\n    onHits: onHits,\n    onError: onError,\n    onRateLimitReached: onRateLimitReached,\n    onInvalidCredentials: onInvalidCredentials\n  });\n  var params = configuration.params;\n  var controls = configuration.controls;\n  var userCoords;\n  var tracker = null;\n\n  if (controls.useDeviceLocation) {\n    tracker = navigator.geolocation.watchPosition(function (_ref2) {\n      var coords = _ref2.coords;\n      userCoords = \"\".concat(coords.latitude, \",\").concat(coords.longitude);\n    });\n  }\n\n  function searcher(query, cb) {\n    var searchParams = _objectSpread(_objectSpread({}, params), {}, {\n      query: query\n    });\n\n    if (userCoords) {\n      searchParams.aroundLatLng = userCoords;\n    }\n\n    return placesClient.search(controls.computeQueryParams(searchParams)).then(function (content) {\n      var hits = content.hits.map(function (hit, hitIndex) {\n        return (0, _formatHit[\"default\"])({\n          formatInputValue: controls.formatInputValue,\n          hit: hit,\n          hitIndex: hitIndex,\n          query: query,\n          rawAnswer: content\n        });\n      });\n      controls.onHits({\n        hits: hits,\n        query: query,\n        rawAnswer: content\n      });\n      return hits;\n    }).then(cb)[\"catch\"](function (e) {\n      if (e.statusCode === 403 && e.message === 'Invalid Application-ID or API key') {\n        controls.onInvalidCredentials();\n        return;\n      } else if (e.statusCode === 429) {\n        controls.onRateLimitReached();\n        return;\n      }\n\n      controls.onError(e);\n    });\n  }\n\n  searcher.configure = function (partial) {\n    var updated = (0, _configure[\"default\"])(_objectSpread(_objectSpread(_objectSpread({}, params), controls), partial));\n    params = updated.params;\n    controls = updated.controls;\n\n    if (controls.useDeviceLocation && tracker === null) {\n      tracker = navigator.geolocation.watchPosition(function (_ref3) {\n        var coords = _ref3.coords;\n        userCoords = \"\".concat(coords.latitude, \",\").concat(coords.longitude);\n      });\n    } else if (!controls.useDeviceLocation && tracker !== null) {\n      navigator.geolocation.clearWatch(tracker);\n      tracker = null;\n      userCoords = null;\n    }\n  };\n\n  return searcher;\n}","map":{"version":3,"sources":["/home/kali/Documents/cybersecurity/client/node_modules/places.js/src/createAutocompleteSource.js"],"names":["Object","defineProperty","exports","value","createAutocompleteSource","_configure","_interopRequireDefault","require","_formatHit","_version","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_ref","algoliasearch","clientOptions","apiKey","appId","hitsPerPage","postcodeSearch","aroundLatLng","aroundRadius","aroundLatLngViaIP","insideBoundingBox","insidePolygon","getRankingInfo","countries","formatInputValue","_ref$computeQueryPara","computeQueryParams","params","_ref$useDeviceLocatio","useDeviceLocation","_ref$language","language","navigator","split","_ref$onHits","onHits","_ref$onError","onError","e","onRateLimitReached","onInvalidCredentials","type","placesClient","initPlaces","as","addAlgoliaAgent","concat","configuration","controls","userCoords","tracker","geolocation","watchPosition","_ref2","coords","latitude","longitude","searcher","query","cb","searchParams","search","then","content","hits","map","hit","hitIndex","rawAnswer","statusCode","message","configure","partial","updated","_ref3","clearWatch"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqBE,wBAArB;;AAEA,IAAIC,UAAU,GAAGC,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAvC;;AAEA,IAAIC,UAAU,GAAGF,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAvC;;AAEA,IAAIE,QAAQ,GAAGH,sBAAsB,CAACC,OAAO,CAAC,WAAD,CAAR,CAArC;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AAEjG,SAASE,OAAT,CAAiBC,MAAjB,EAAyBC,cAAzB,EAAyC;AAAE,MAAIC,IAAI,GAAGf,MAAM,CAACe,IAAP,CAAYF,MAAZ,CAAX;;AAAgC,MAAIb,MAAM,CAACgB,qBAAX,EAAkC;AAAE,QAAIC,OAAO,GAAGjB,MAAM,CAACgB,qBAAP,CAA6BH,MAA7B,CAAd;AAAoD,QAAIC,cAAJ,EAAoBG,OAAO,GAAGA,OAAO,CAACC,MAAR,CAAe,UAAUC,GAAV,EAAe;AAAE,aAAOnB,MAAM,CAACoB,wBAAP,CAAgCP,MAAhC,EAAwCM,GAAxC,EAA6CE,UAApD;AAAiE,KAAjG,CAAV;AAA8GN,IAAAA,IAAI,CAACO,IAAL,CAAUC,KAAV,CAAgBR,IAAhB,EAAsBE,OAAtB;AAAiC;;AAAC,SAAOF,IAAP;AAAc;;AAErV,SAASS,aAAT,CAAuBC,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;;AAAuD,QAAIA,CAAC,GAAG,CAAR,EAAW;AAAEd,MAAAA,OAAO,CAACZ,MAAM,CAAC6B,MAAD,CAAP,EAAiB,IAAjB,CAAP,CAA8BC,OAA9B,CAAsC,UAAUC,GAAV,EAAe;AAAEC,QAAAA,eAAe,CAACP,MAAD,EAASM,GAAT,EAAcF,MAAM,CAACE,GAAD,CAApB,CAAf;AAA4C,OAAnG;AAAuG,KAApH,MAA0H,IAAI/B,MAAM,CAACiC,yBAAX,EAAsC;AAAEjC,MAAAA,MAAM,CAACkC,gBAAP,CAAwBT,MAAxB,EAAgCzB,MAAM,CAACiC,yBAAP,CAAiCJ,MAAjC,CAAhC;AAA4E,KAApH,MAA0H;AAAEjB,MAAAA,OAAO,CAACZ,MAAM,CAAC6B,MAAD,CAAP,CAAP,CAAwBC,OAAxB,CAAgC,UAAUC,GAAV,EAAe;AAAE/B,QAAAA,MAAM,CAACC,cAAP,CAAsBwB,MAAtB,EAA8BM,GAA9B,EAAmC/B,MAAM,CAACoB,wBAAP,CAAgCS,MAAhC,EAAwCE,GAAxC,CAAnC;AAAmF,OAApI;AAAwI;AAAE;;AAAC,SAAON,MAAP;AAAgB;;AAEthB,SAASO,eAAT,CAAyBtB,GAAzB,EAA8BqB,GAA9B,EAAmC5B,KAAnC,EAA0C;AAAE,MAAI4B,GAAG,IAAIrB,GAAX,EAAgB;AAAEV,IAAAA,MAAM,CAACC,cAAP,CAAsBS,GAAtB,EAA2BqB,GAA3B,EAAgC;AAAE5B,MAAAA,KAAK,EAAEA,KAAT;AAAgBkB,MAAAA,UAAU,EAAE,IAA5B;AAAkCc,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAE1B,IAAAA,GAAG,CAACqB,GAAD,CAAH,GAAW5B,KAAX;AAAmB;;AAAC,SAAOO,GAAP;AAAa;;AAEjN,SAASN,wBAAT,CAAkCiC,IAAlC,EAAwC;AACtC,MAAIC,aAAa,GAAGD,IAAI,CAACC,aAAzB;AAAA,MACIC,aAAa,GAAGF,IAAI,CAACE,aADzB;AAAA,MAEIC,MAAM,GAAGH,IAAI,CAACG,MAFlB;AAAA,MAGIC,KAAK,GAAGJ,IAAI,CAACI,KAHjB;AAAA,MAIIC,WAAW,GAAGL,IAAI,CAACK,WAJvB;AAAA,MAKIC,cAAc,GAAGN,IAAI,CAACM,cAL1B;AAAA,MAMIC,YAAY,GAAGP,IAAI,CAACO,YANxB;AAAA,MAOIC,YAAY,GAAGR,IAAI,CAACQ,YAPxB;AAAA,MAQIC,iBAAiB,GAAGT,IAAI,CAACS,iBAR7B;AAAA,MASIC,iBAAiB,GAAGV,IAAI,CAACU,iBAT7B;AAAA,MAUIC,aAAa,GAAGX,IAAI,CAACW,aAVzB;AAAA,MAWIC,cAAc,GAAGZ,IAAI,CAACY,cAX1B;AAAA,MAYIC,SAAS,GAAGb,IAAI,CAACa,SAZrB;AAAA,MAaIC,gBAAgB,GAAGd,IAAI,CAACc,gBAb5B;AAAA,MAcIC,qBAAqB,GAAGf,IAAI,CAACgB,kBAdjC;AAAA,MAeIA,kBAAkB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,UAAUE,MAAV,EAAkB;AAC5E,WAAOA,MAAP;AACD,GAFwB,GAErBF,qBAjBJ;AAAA,MAkBIG,qBAAqB,GAAGlB,IAAI,CAACmB,iBAlBjC;AAAA,MAmBIA,iBAAiB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAnBnE;AAAA,MAoBIE,aAAa,GAAGpB,IAAI,CAACqB,QApBzB;AAAA,MAqBIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2BE,SAAS,CAACD,QAAV,CAAmBE,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAA3B,GAA8DH,aArB7E;AAAA,MAsBII,WAAW,GAAGxB,IAAI,CAACyB,MAtBvB;AAAA,MAuBIA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,YAAY,CAAE,CAAvC,GAA0CA,WAvBvD;AAAA,MAwBIE,YAAY,GAAG1B,IAAI,CAAC2B,OAxBxB;AAAA,MAyBIA,OAAO,GAAGD,YAAY,KAAK,KAAK,CAAtB,GAA0B,UAAUE,CAAV,EAAa;AACnD,UAAMA,CAAN;AACD,GAFa,GAEVF,YA3BJ;AAAA,MA4BIG,kBAAkB,GAAG7B,IAAI,CAAC6B,kBA5B9B;AAAA,MA6BIC,oBAAoB,GAAG9B,IAAI,CAAC8B,oBA7BhC;AAAA,MA8BIC,IAAI,GAAG/B,IAAI,CAAC+B,IA9BhB;AA+BA,MAAIC,YAAY,GAAG/B,aAAa,CAACgC,UAAd,CAAyB7B,KAAzB,EAAgCD,MAAhC,EAAwCD,aAAxC,CAAnB;AACA8B,EAAAA,YAAY,CAACE,EAAb,CAAgBC,eAAhB,CAAgC,kBAAkBC,MAAlB,CAAyBhE,QAAQ,CAAC,SAAD,CAAjC,CAAhC;AACA,MAAIiE,aAAa,GAAG,CAAC,GAAGrE,UAAU,CAAC,SAAD,CAAd,EAA2B;AAC7CqC,IAAAA,WAAW,EAAEA,WADgC;AAE7C0B,IAAAA,IAAI,EAAEA,IAFuC;AAG7CzB,IAAAA,cAAc,EAAEA,cAH6B;AAI7CO,IAAAA,SAAS,EAAEA,SAJkC;AAK7CQ,IAAAA,QAAQ,EAAEA,QALmC;AAM7Cd,IAAAA,YAAY,EAAEA,YAN+B;AAO7CC,IAAAA,YAAY,EAAEA,YAP+B;AAQ7CC,IAAAA,iBAAiB,EAAEA,iBAR0B;AAS7CC,IAAAA,iBAAiB,EAAEA,iBAT0B;AAU7CC,IAAAA,aAAa,EAAEA,aAV8B;AAW7CC,IAAAA,cAAc,EAAEA,cAX6B;AAY7CE,IAAAA,gBAAgB,EAAEA,gBAZ2B;AAa7CE,IAAAA,kBAAkB,EAAEA,kBAbyB;AAc7CG,IAAAA,iBAAiB,EAAEA,iBAd0B;AAe7CM,IAAAA,MAAM,EAAEA,MAfqC;AAgB7CE,IAAAA,OAAO,EAAEA,OAhBoC;AAiB7CE,IAAAA,kBAAkB,EAAEA,kBAjByB;AAkB7CC,IAAAA,oBAAoB,EAAEA;AAlBuB,GAA3B,CAApB;AAoBA,MAAIb,MAAM,GAAGoB,aAAa,CAACpB,MAA3B;AACA,MAAIqB,QAAQ,GAAGD,aAAa,CAACC,QAA7B;AACA,MAAIC,UAAJ;AACA,MAAIC,OAAO,GAAG,IAAd;;AAEA,MAAIF,QAAQ,CAACnB,iBAAb,EAAgC;AAC9BqB,IAAAA,OAAO,GAAGlB,SAAS,CAACmB,WAAV,CAAsBC,aAAtB,CAAoC,UAAUC,KAAV,EAAiB;AAC7D,UAAIC,MAAM,GAAGD,KAAK,CAACC,MAAnB;AACAL,MAAAA,UAAU,GAAG,GAAGH,MAAH,CAAUQ,MAAM,CAACC,QAAjB,EAA2B,GAA3B,EAAgCT,MAAhC,CAAuCQ,MAAM,CAACE,SAA9C,CAAb;AACD,KAHS,CAAV;AAID;;AAED,WAASC,QAAT,CAAkBC,KAAlB,EAAyBC,EAAzB,EAA6B;AAC3B,QAAIC,YAAY,GAAG/D,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK8B,MAAL,CAAd,EAA4B,EAA5B,EAAgC;AAC9D+B,MAAAA,KAAK,EAAEA;AADuD,KAAhC,CAAhC;;AAIA,QAAIT,UAAJ,EAAgB;AACdW,MAAAA,YAAY,CAAC3C,YAAb,GAA4BgC,UAA5B;AACD;;AAED,WAAOP,YAAY,CAACmB,MAAb,CAAoBb,QAAQ,CAACtB,kBAAT,CAA4BkC,YAA5B,CAApB,EAA+DE,IAA/D,CAAoE,UAAUC,OAAV,EAAmB;AAC5F,UAAIC,IAAI,GAAGD,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiB,UAAUC,GAAV,EAAeC,QAAf,EAAyB;AACnD,eAAO,CAAC,GAAGtF,UAAU,CAAC,SAAD,CAAd,EAA2B;AAChC2C,UAAAA,gBAAgB,EAAEwB,QAAQ,CAACxB,gBADK;AAEhC0C,UAAAA,GAAG,EAAEA,GAF2B;AAGhCC,UAAAA,QAAQ,EAAEA,QAHsB;AAIhCT,UAAAA,KAAK,EAAEA,KAJyB;AAKhCU,UAAAA,SAAS,EAAEL;AALqB,SAA3B,CAAP;AAOD,OARU,CAAX;AASAf,MAAAA,QAAQ,CAACb,MAAT,CAAgB;AACd6B,QAAAA,IAAI,EAAEA,IADQ;AAEdN,QAAAA,KAAK,EAAEA,KAFO;AAGdU,QAAAA,SAAS,EAAEL;AAHG,OAAhB;AAKA,aAAOC,IAAP;AACD,KAhBM,EAgBJF,IAhBI,CAgBCH,EAhBD,EAgBK,OAhBL,EAgBc,UAAUrB,CAAV,EAAa;AAChC,UAAIA,CAAC,CAAC+B,UAAF,KAAiB,GAAjB,IAAwB/B,CAAC,CAACgC,OAAF,KAAc,mCAA1C,EAA+E;AAC7EtB,QAAAA,QAAQ,CAACR,oBAAT;AACA;AACD,OAHD,MAGO,IAAIF,CAAC,CAAC+B,UAAF,KAAiB,GAArB,EAA0B;AAC/BrB,QAAAA,QAAQ,CAACT,kBAAT;AACA;AACD;;AAEDS,MAAAA,QAAQ,CAACX,OAAT,CAAiBC,CAAjB;AACD,KA1BM,CAAP;AA2BD;;AAEDmB,EAAAA,QAAQ,CAACc,SAAT,GAAqB,UAAUC,OAAV,EAAmB;AACtC,QAAIC,OAAO,GAAG,CAAC,GAAG/F,UAAU,CAAC,SAAD,CAAd,EAA2BmB,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK8B,MAAL,CAAd,EAA4BqB,QAA5B,CAAd,EAAqDwB,OAArD,CAAxC,CAAd;AACA7C,IAAAA,MAAM,GAAG8C,OAAO,CAAC9C,MAAjB;AACAqB,IAAAA,QAAQ,GAAGyB,OAAO,CAACzB,QAAnB;;AAEA,QAAIA,QAAQ,CAACnB,iBAAT,IAA8BqB,OAAO,KAAK,IAA9C,EAAoD;AAClDA,MAAAA,OAAO,GAAGlB,SAAS,CAACmB,WAAV,CAAsBC,aAAtB,CAAoC,UAAUsB,KAAV,EAAiB;AAC7D,YAAIpB,MAAM,GAAGoB,KAAK,CAACpB,MAAnB;AACAL,QAAAA,UAAU,GAAG,GAAGH,MAAH,CAAUQ,MAAM,CAACC,QAAjB,EAA2B,GAA3B,EAAgCT,MAAhC,CAAuCQ,MAAM,CAACE,SAA9C,CAAb;AACD,OAHS,CAAV;AAID,KALD,MAKO,IAAI,CAACR,QAAQ,CAACnB,iBAAV,IAA+BqB,OAAO,KAAK,IAA/C,EAAqD;AAC1DlB,MAAAA,SAAS,CAACmB,WAAV,CAAsBwB,UAAtB,CAAiCzB,OAAjC;AACAA,MAAAA,OAAO,GAAG,IAAV;AACAD,MAAAA,UAAU,GAAG,IAAb;AACD;AACF,GAfD;;AAiBA,SAAOQ,QAAP;AACD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = createAutocompleteSource;\n\nvar _configure = _interopRequireDefault(require(\"./configure\"));\n\nvar _formatHit = _interopRequireDefault(require(\"./formatHit\"));\n\nvar _version = _interopRequireDefault(require(\"./version\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction createAutocompleteSource(_ref) {\n  var algoliasearch = _ref.algoliasearch,\n      clientOptions = _ref.clientOptions,\n      apiKey = _ref.apiKey,\n      appId = _ref.appId,\n      hitsPerPage = _ref.hitsPerPage,\n      postcodeSearch = _ref.postcodeSearch,\n      aroundLatLng = _ref.aroundLatLng,\n      aroundRadius = _ref.aroundRadius,\n      aroundLatLngViaIP = _ref.aroundLatLngViaIP,\n      insideBoundingBox = _ref.insideBoundingBox,\n      insidePolygon = _ref.insidePolygon,\n      getRankingInfo = _ref.getRankingInfo,\n      countries = _ref.countries,\n      formatInputValue = _ref.formatInputValue,\n      _ref$computeQueryPara = _ref.computeQueryParams,\n      computeQueryParams = _ref$computeQueryPara === void 0 ? function (params) {\n    return params;\n  } : _ref$computeQueryPara,\n      _ref$useDeviceLocatio = _ref.useDeviceLocation,\n      useDeviceLocation = _ref$useDeviceLocatio === void 0 ? false : _ref$useDeviceLocatio,\n      _ref$language = _ref.language,\n      language = _ref$language === void 0 ? navigator.language.split('-')[0] : _ref$language,\n      _ref$onHits = _ref.onHits,\n      onHits = _ref$onHits === void 0 ? function () {} : _ref$onHits,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (e) {\n    throw e;\n  } : _ref$onError,\n      onRateLimitReached = _ref.onRateLimitReached,\n      onInvalidCredentials = _ref.onInvalidCredentials,\n      type = _ref.type;\n  var placesClient = algoliasearch.initPlaces(appId, apiKey, clientOptions);\n  placesClient.as.addAlgoliaAgent(\"Algolia Places \".concat(_version[\"default\"]));\n  var configuration = (0, _configure[\"default\"])({\n    hitsPerPage: hitsPerPage,\n    type: type,\n    postcodeSearch: postcodeSearch,\n    countries: countries,\n    language: language,\n    aroundLatLng: aroundLatLng,\n    aroundRadius: aroundRadius,\n    aroundLatLngViaIP: aroundLatLngViaIP,\n    insideBoundingBox: insideBoundingBox,\n    insidePolygon: insidePolygon,\n    getRankingInfo: getRankingInfo,\n    formatInputValue: formatInputValue,\n    computeQueryParams: computeQueryParams,\n    useDeviceLocation: useDeviceLocation,\n    onHits: onHits,\n    onError: onError,\n    onRateLimitReached: onRateLimitReached,\n    onInvalidCredentials: onInvalidCredentials\n  });\n  var params = configuration.params;\n  var controls = configuration.controls;\n  var userCoords;\n  var tracker = null;\n\n  if (controls.useDeviceLocation) {\n    tracker = navigator.geolocation.watchPosition(function (_ref2) {\n      var coords = _ref2.coords;\n      userCoords = \"\".concat(coords.latitude, \",\").concat(coords.longitude);\n    });\n  }\n\n  function searcher(query, cb) {\n    var searchParams = _objectSpread(_objectSpread({}, params), {}, {\n      query: query\n    });\n\n    if (userCoords) {\n      searchParams.aroundLatLng = userCoords;\n    }\n\n    return placesClient.search(controls.computeQueryParams(searchParams)).then(function (content) {\n      var hits = content.hits.map(function (hit, hitIndex) {\n        return (0, _formatHit[\"default\"])({\n          formatInputValue: controls.formatInputValue,\n          hit: hit,\n          hitIndex: hitIndex,\n          query: query,\n          rawAnswer: content\n        });\n      });\n      controls.onHits({\n        hits: hits,\n        query: query,\n        rawAnswer: content\n      });\n      return hits;\n    }).then(cb)[\"catch\"](function (e) {\n      if (e.statusCode === 403 && e.message === 'Invalid Application-ID or API key') {\n        controls.onInvalidCredentials();\n        return;\n      } else if (e.statusCode === 429) {\n        controls.onRateLimitReached();\n        return;\n      }\n\n      controls.onError(e);\n    });\n  }\n\n  searcher.configure = function (partial) {\n    var updated = (0, _configure[\"default\"])(_objectSpread(_objectSpread(_objectSpread({}, params), controls), partial));\n    params = updated.params;\n    controls = updated.controls;\n\n    if (controls.useDeviceLocation && tracker === null) {\n      tracker = navigator.geolocation.watchPosition(function (_ref3) {\n        var coords = _ref3.coords;\n        userCoords = \"\".concat(coords.latitude, \",\").concat(coords.longitude);\n      });\n    } else if (!controls.useDeviceLocation && tracker !== null) {\n      navigator.geolocation.clearWatch(tracker);\n      tracker = null;\n      userCoords = null;\n    }\n  };\n\n  return searcher;\n}"]},"metadata":{},"sourceType":"script"}