{"ast":null,"code":"import React, { Fragment } from 'react';\nimport axios from \"axios\";\nimport { NotificationManager } from \"react-notifications\";\nimport { confirmAlert } from 'react-confirm-alert';\nimport { Row, Col, Card, CardBody, Button, CardHeader, ButtonGroup } from 'reactstrap';\n\nconst handleFileDeletionUploadedFiles = (i, setMyFile, setPopoverStates, selected) => {\n  // set files state\n  setMyFile(prevState => {\n    console.log(\"prev\", prevState);\n    return prevState.filter((item, idx) => {\n      if (item.link !== selected.link) {\n        return true;\n      }\n    });\n  }); // close popover\n\n  setPopoverStates(prevState => {\n    return { ...prevState,\n      [`popover${i}`]: false\n    };\n  });\n};\n\nconst handleDotsClickExpansion = (file, index, setPopoverStates) => {\n  setPopoverStates(prevState => {\n    return { ...prevState,\n      [`popover${index}`]: true\n    };\n  });\n};\n\nconst bytesToSize = bytes => {\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  if (bytes == 0) return '0 Byte';\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n};\n\nconst calculateFileType = type => {\n  switch (type) {\n    case \"video/mp4\":\n      return \"mp4\";\n      break;\n\n    case \"image/png\":\n      return \"png\";\n      break;\n\n    case \"image/jpeg\":\n      return \"jpeg\";\n      break;\n\n    case \"image/jpg\":\n      return \"jpg\";\n      break;\n\n    case \"image/gif\":\n      return \"gif\";\n      break;\n\n    case \"image/bmp\":\n      return \"bmp\";\n      break;\n\n    case \"application/pdf\":\n      return \"pdf\";\n      break;\n\n    case \"text/csv\":\n      return \"csv\";\n      break;\n\n    case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n      return \"xlsx\";\n      break;\n\n    case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n      return \"docx\";\n      break;\n\n    case \"video/webm\":\n      return \"webm\";\n      break;\n\n    case \"audio/mpeg\":\n      return \"mp3\";\n      break;\n\n    default:\n      break;\n  }\n};\n\nconst closePopoverDynamic = (i, setPopoverStates) => {\n  setPopoverStates(prevState => {\n    return { ...prevState,\n      [`popover${i}`]: false\n    };\n  });\n}; // UPLOAD file via api-call to AWS-S3\n\n\nconst handleFileUploadAnyType = (onSubmit, setMetaFileData, setFileReadyStatus, setCurrentUploadFileStatus, setMyFile, currentFileSelectedUpload, metaFileData, setProgress) => {\n  // upload file to aws S3\n  const data = new FormData();\n  data.append(\"file\", currentFileSelectedUpload);\n  data.append(\"meta\", metaFileData);\n  const config = {\n    onUploadProgress: progressEvent => {\n      let percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n      setProgress(percentCompleted);\n    },\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  };\n  axios.post(`${process.env.REACT_APP_BASE_URL}/upload/misc/file/softare/listing/sale`, data, config).then(res => {\n    if (res.data.message === \"Successfully uploaded file!\") {\n      console.log(res.data);\n      const {\n        file\n      } = res.data; // update local file array state\n\n      setMyFile(prevState => {\n        return [...prevState, { ...file,\n          icon: \"fa fa-file\"\n        }];\n      });\n      NotificationManager.success(`We've successfully uploaded your file! Please proceed filling out the remaining form data in order to move onto the final page!`, 'Successfully uploaded file!', 4500);\n      setMetaFileData(null);\n      setFileReadyStatus(false);\n      setCurrentUploadFileStatus(null);\n      onSubmit();\n    } else {\n      console.log(\"Err\", res.data);\n      NotificationManager.error(res.data.message, 'An error occurred while uploading file!', 4500);\n      onSubmit();\n    }\n  }).catch(err => {\n    console.log(err);\n    NotificationManager.error(\"An unknown error has occurred while uploading your file - please try again or contact support if the issue persists...\", 'An error occurred while uploading file!', 4500);\n    onSubmit();\n  });\n};\n\nconst handleFilesFinalSubmission = (files, previous, saveApplicationDetailsProgress, setSubmissionPopoverState, shiftCoreStyles, clearAllBodyScrollLocks, setFileSheetOpenState) => {\n  // clear locks related to pane\n  shiftCoreStyles(false); // clear body locks from open pane\n\n  clearAllBodyScrollLocks(); // save redux logic\n\n  saveApplicationDetailsProgress({ ...previous,\n    files\n  }); // notifiy of success\n\n  NotificationManager.success(`You've successfully 'saved' your uploaded files/folders - continue onwards with your application and good luck!`, 'Successfully uupdated/uploaded files & folders.', 4500); // close popover then MAIN pane\n\n  setSubmissionPopoverState(false); // close MAIN PANE FINALLY\n\n  setFileSheetOpenState(false);\n};\n\nexport default {\n  handleFileDeletionUploadedFiles,\n  handleDotsClickExpansion,\n  handleFilesFinalSubmission,\n  calculateFileType,\n  bytesToSize,\n  handleFileUploadAnyType,\n  closePopoverDynamic\n};","map":{"version":3,"sources":["/home/kali/Documents/cybersecurity/client/src/components/dashboard/opportunities/employers/applyToListingHacker/helpers/fileManagerHelperFunctions.js"],"names":["React","Fragment","axios","NotificationManager","confirmAlert","Row","Col","Card","CardBody","Button","CardHeader","ButtonGroup","handleFileDeletionUploadedFiles","i","setMyFile","setPopoverStates","selected","prevState","console","log","filter","item","idx","link","handleDotsClickExpansion","file","index","bytesToSize","bytes","sizes","parseInt","Math","floor","round","pow","calculateFileType","type","closePopoverDynamic","handleFileUploadAnyType","onSubmit","setMetaFileData","setFileReadyStatus","setCurrentUploadFileStatus","currentFileSelectedUpload","metaFileData","setProgress","data","FormData","append","config","onUploadProgress","progressEvent","percentCompleted","loaded","total","headers","post","process","env","REACT_APP_BASE_URL","then","res","message","icon","success","error","catch","err","handleFilesFinalSubmission","files","previous","saveApplicationDetailsProgress","setSubmissionPopoverState","shiftCoreStyles","clearAllBodyScrollLocks","setFileSheetOpenState"],"mappings":"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","sourcesContent":["import React, { Fragment} from 'react';\nimport axios from \"axios\";\nimport { NotificationManager } from \"react-notifications\";\nimport { confirmAlert } from 'react-confirm-alert';\nimport { Row, Col, Card, CardBody, Button, CardHeader, ButtonGroup } from 'reactstrap';\n\n\nconst handleFileDeletionUploadedFiles = (i, setMyFile, setPopoverStates, selected) => {\n    // set files state\n    setMyFile(prevState => {\n        console.log(\"prev\", prevState);\n        return prevState.filter((item, idx) => {\n            if (item.link !== selected.link) {\n                return true;\n            }\n        })\n    });\n    // close popover\n    setPopoverStates(prevState => {\n        return {\n            ...prevState,\n            [`popover${i}`]: false\n        }\n    });\n}\nconst handleDotsClickExpansion = (file, index, setPopoverStates) => {\n    setPopoverStates(prevState => {\n        return {\n            ...prevState,\n            [`popover${index}`]: true\n        }\n    });\n}\nconst bytesToSize = (bytes) => {\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes == 0) return '0 Byte';\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];\n}\nconst calculateFileType = (type) => {\n    switch (type) {\n        case \"video/mp4\":\n            return \"mp4\";\n            break;\n        case \"image/png\":\n            return \"png\";\n            break;\n        case \"image/jpeg\":\n            return \"jpeg\";\n            break;\n        case \"image/jpg\":\n            return \"jpg\";\n            break;\n        case \"image/gif\":\n            return \"gif\";\n            break;\n        case \"image/bmp\":\n            return \"bmp\";\n            break;\n        case \"application/pdf\":\n            return \"pdf\";\n            break;\n        case \"text/csv\":\n            return \"csv\";\n            break;\n        case \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":\n            return \"xlsx\";\n            break;\n        case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\n            return \"docx\";\n            break;\n        case \"video/webm\":\n            return \"webm\";\n            break;\n        case \"audio/mpeg\":\n            return \"mp3\";\n            break;\n        default:\n            break;\n    }\n}\nconst closePopoverDynamic = (i, setPopoverStates) => {\n    setPopoverStates(prevState => {\n        return {\n            ...prevState,\n            [`popover${i}`]: false\n        }\n    });\n}\n// UPLOAD file via api-call to AWS-S3\nconst handleFileUploadAnyType = (onSubmit, setMetaFileData, setFileReadyStatus, setCurrentUploadFileStatus, setMyFile, currentFileSelectedUpload, metaFileData, setProgress) => {\n    // upload file to aws S3\n    const data = new FormData();\n\n    data.append(\"file\", currentFileSelectedUpload);\n    data.append(\"meta\", metaFileData);\n\n    const config = {\n        onUploadProgress: (progressEvent) => {\n            let percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n\n            setProgress(percentCompleted);\n        },\n        headers: {\n            'Content-Type': 'multipart/form-data'\n        }\n    };\n\n    axios.post(`${process.env.REACT_APP_BASE_URL}/upload/misc/file/softare/listing/sale`, data, config).then((res) => {\n        if (res.data.message === \"Successfully uploaded file!\") {\n            console.log(res.data);\n\n            const { file } = res.data;\n\n            // update local file array state\n            setMyFile(prevState => {\n                return [...prevState, {\n                    ...file,\n                    icon: \"fa fa-file\"\n                }]\n            });\n\n            NotificationManager.success(`We've successfully uploaded your file! Please proceed filling out the remaining form data in order to move onto the final page!`, 'Successfully uploaded file!', 4500);\n\n            setMetaFileData(null);\n            setFileReadyStatus(false);\n            setCurrentUploadFileStatus(null);\n\n            onSubmit();\n        } else {\n            console.log(\"Err\", res.data);\n\n            NotificationManager.error(res.data.message, 'An error occurred while uploading file!', 4500);\n\n            onSubmit();\n        }\n    }).catch((err) => {\n        console.log(err);\n\n        NotificationManager.error(\"An unknown error has occurred while uploading your file - please try again or contact support if the issue persists...\", 'An error occurred while uploading file!', 4500);\n\n        onSubmit();\n    })\n}\nconst handleFilesFinalSubmission = (files, previous, saveApplicationDetailsProgress, setSubmissionPopoverState, shiftCoreStyles, clearAllBodyScrollLocks, setFileSheetOpenState) => {\n    // clear locks related to pane\n    shiftCoreStyles(false); \n    // clear body locks from open pane\n    clearAllBodyScrollLocks();\n    // save redux logic\n    saveApplicationDetailsProgress({\n        ...previous,\n        files\n    });\n    // notifiy of success\n    NotificationManager.success(`You've successfully 'saved' your uploaded files/folders - continue onwards with your application and good luck!`, 'Successfully uupdated/uploaded files & folders.', 4500);\n    // close popover then MAIN pane\n    setSubmissionPopoverState(false);\n    // close MAIN PANE FINALLY\n    setFileSheetOpenState(false);\n} \nexport default {\n    handleFileDeletionUploadedFiles,\n    handleDotsClickExpansion,\n    handleFilesFinalSubmission,\n    calculateFileType,\n    bytesToSize,\n    handleFileUploadAnyType,\n    closePopoverDynamic\n}\n"]},"metadata":{},"sourceType":"module"}