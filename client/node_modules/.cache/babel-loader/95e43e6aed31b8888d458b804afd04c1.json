{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _configure = _interopRequireDefault(require(\"./configure\"));\n\nvar _formatHit = _interopRequireDefault(require(\"./formatHit\"));\n\nvar _version = _interopRequireDefault(require(\"./version\"));\n\nvar _defaultTemplates = _interopRequireDefault(require(\"./defaultTemplates\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar filterApplicableParams = function filterApplicableParams(params) {\n  var hitsPerPage = params.hitsPerPage,\n      aroundLatLng = params.aroundLatLng,\n      getRankingInfo = params.getRankingInfo,\n      language = params.language;\n  var filtered = {};\n\n  if (typeof hitsPerPage === 'number') {\n    filtered.hitsPerPage = hitsPerPage;\n  }\n\n  if (typeof language === 'string') {\n    filtered.language = language;\n  }\n\n  if (typeof getRankingInfo === 'boolean') {\n    filtered.getRankingInfo = getRankingInfo;\n  }\n\n  if (typeof aroundLatLng === 'string') {\n    filtered.aroundLatLng = aroundLatLng;\n  }\n\n  return filtered;\n};\n\nvar createReverseGeocodingSource = function createReverseGeocodingSource(_ref) {\n  var algoliasearch = _ref.algoliasearch,\n      clientOptions = _ref.clientOptions,\n      apiKey = _ref.apiKey,\n      appId = _ref.appId,\n      hitsPerPage = _ref.hitsPerPage,\n      aroundLatLng = _ref.aroundLatLng,\n      getRankingInfo = _ref.getRankingInfo,\n      _ref$formatInputValue = _ref.formatInputValue,\n      formatInputValue = _ref$formatInputValue === void 0 ? _defaultTemplates[\"default\"].value : _ref$formatInputValue,\n      _ref$language = _ref.language,\n      language = _ref$language === void 0 ? navigator.language.split('-')[0] : _ref$language,\n      _ref$onHits = _ref.onHits,\n      onHits = _ref$onHits === void 0 ? function () {} : _ref$onHits,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (e) {\n    throw e;\n  } : _ref$onError,\n      onRateLimitReached = _ref.onRateLimitReached,\n      onInvalidCredentials = _ref.onInvalidCredentials;\n  var placesClient = algoliasearch.initPlaces(appId, apiKey, clientOptions);\n  placesClient.as.addAlgoliaAgent(\"Algolia Places \".concat(_version[\"default\"]));\n  var configuration = (0, _configure[\"default\"])({\n    apiKey: apiKey,\n    appId: appId,\n    hitsPerPage: hitsPerPage,\n    aroundLatLng: aroundLatLng,\n    getRankingInfo: getRankingInfo,\n    language: language,\n    formatInputValue: formatInputValue,\n    onHits: onHits,\n    onError: onError,\n    onRateLimitReached: onRateLimitReached,\n    onInvalidCredentials: onInvalidCredentials\n  });\n  var params = filterApplicableParams(configuration.params);\n  var controls = configuration.controls;\n\n  var searcher = function searcher(queryAroundLatLng, cb) {\n    var finalAroundLatLng = queryAroundLatLng || params.aroundLatLng;\n\n    if (!finalAroundLatLng) {\n      var error = new Error('A location must be provided for reverse geocoding');\n      return Promise.reject(error);\n    }\n\n    return placesClient.reverse(_objectSpread(_objectSpread({}, params), {}, {\n      aroundLatLng: finalAroundLatLng\n    })).then(function (content) {\n      var hits = content.hits.map(function (hit, hitIndex) {\n        return (0, _formatHit[\"default\"])({\n          formatInputValue: controls.formatInputValue,\n          hit: hit,\n          hitIndex: hitIndex,\n          query: finalAroundLatLng,\n          rawAnswer: content\n        });\n      });\n      controls.onHits({\n        hits: hits,\n        query: finalAroundLatLng,\n        rawAnswer: content\n      });\n      return hits;\n    }).then(cb)[\"catch\"](function (e) {\n      if (e.statusCode === 403 && e.message === 'Invalid Application-ID or API key') {\n        controls.onInvalidCredentials();\n        return;\n      } else if (e.statusCode === 429) {\n        controls.onRateLimitReached();\n        return;\n      }\n\n      controls.onError(e);\n    });\n  };\n\n  searcher.configure = function (partial) {\n    var updated = (0, _configure[\"default\"])(_objectSpread(_objectSpread(_objectSpread({}, params), controls), partial));\n    params = filterApplicableParams(updated.params);\n    controls = updated.controls;\n    return searcher;\n  };\n\n  return searcher;\n};\n\nvar _default = createReverseGeocodingSource;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/kali/Documents/cybersecurity/client/node_modules/places.js/src/createReverseGeocodingSource.js"],"names":["Object","defineProperty","exports","value","_configure","_interopRequireDefault","require","_formatHit","_version","_defaultTemplates","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","filterApplicableParams","params","hitsPerPage","aroundLatLng","getRankingInfo","language","filtered","createReverseGeocodingSource","_ref","algoliasearch","clientOptions","apiKey","appId","_ref$formatInputValue","formatInputValue","_ref$language","navigator","split","_ref$onHits","onHits","_ref$onError","onError","e","onRateLimitReached","onInvalidCredentials","placesClient","initPlaces","as","addAlgoliaAgent","concat","configuration","controls","searcher","queryAroundLatLng","cb","finalAroundLatLng","error","Error","Promise","reject","reverse","then","content","hits","map","hit","hitIndex","query","rawAnswer","statusCode","message","configure","partial","updated","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _configure = _interopRequireDefault(require(\"./configure\"));\n\nvar _formatHit = _interopRequireDefault(require(\"./formatHit\"));\n\nvar _version = _interopRequireDefault(require(\"./version\"));\n\nvar _defaultTemplates = _interopRequireDefault(require(\"./defaultTemplates\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar filterApplicableParams = function filterApplicableParams(params) {\n  var hitsPerPage = params.hitsPerPage,\n      aroundLatLng = params.aroundLatLng,\n      getRankingInfo = params.getRankingInfo,\n      language = params.language;\n  var filtered = {};\n\n  if (typeof hitsPerPage === 'number') {\n    filtered.hitsPerPage = hitsPerPage;\n  }\n\n  if (typeof language === 'string') {\n    filtered.language = language;\n  }\n\n  if (typeof getRankingInfo === 'boolean') {\n    filtered.getRankingInfo = getRankingInfo;\n  }\n\n  if (typeof aroundLatLng === 'string') {\n    filtered.aroundLatLng = aroundLatLng;\n  }\n\n  return filtered;\n};\n\nvar createReverseGeocodingSource = function createReverseGeocodingSource(_ref) {\n  var algoliasearch = _ref.algoliasearch,\n      clientOptions = _ref.clientOptions,\n      apiKey = _ref.apiKey,\n      appId = _ref.appId,\n      hitsPerPage = _ref.hitsPerPage,\n      aroundLatLng = _ref.aroundLatLng,\n      getRankingInfo = _ref.getRankingInfo,\n      _ref$formatInputValue = _ref.formatInputValue,\n      formatInputValue = _ref$formatInputValue === void 0 ? _defaultTemplates[\"default\"].value : _ref$formatInputValue,\n      _ref$language = _ref.language,\n      language = _ref$language === void 0 ? navigator.language.split('-')[0] : _ref$language,\n      _ref$onHits = _ref.onHits,\n      onHits = _ref$onHits === void 0 ? function () {} : _ref$onHits,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (e) {\n    throw e;\n  } : _ref$onError,\n      onRateLimitReached = _ref.onRateLimitReached,\n      onInvalidCredentials = _ref.onInvalidCredentials;\n  var placesClient = algoliasearch.initPlaces(appId, apiKey, clientOptions);\n  placesClient.as.addAlgoliaAgent(\"Algolia Places \".concat(_version[\"default\"]));\n  var configuration = (0, _configure[\"default\"])({\n    apiKey: apiKey,\n    appId: appId,\n    hitsPerPage: hitsPerPage,\n    aroundLatLng: aroundLatLng,\n    getRankingInfo: getRankingInfo,\n    language: language,\n    formatInputValue: formatInputValue,\n    onHits: onHits,\n    onError: onError,\n    onRateLimitReached: onRateLimitReached,\n    onInvalidCredentials: onInvalidCredentials\n  });\n  var params = filterApplicableParams(configuration.params);\n  var controls = configuration.controls;\n\n  var searcher = function searcher(queryAroundLatLng, cb) {\n    var finalAroundLatLng = queryAroundLatLng || params.aroundLatLng;\n\n    if (!finalAroundLatLng) {\n      var error = new Error('A location must be provided for reverse geocoding');\n      return Promise.reject(error);\n    }\n\n    return placesClient.reverse(_objectSpread(_objectSpread({}, params), {}, {\n      aroundLatLng: finalAroundLatLng\n    })).then(function (content) {\n      var hits = content.hits.map(function (hit, hitIndex) {\n        return (0, _formatHit[\"default\"])({\n          formatInputValue: controls.formatInputValue,\n          hit: hit,\n          hitIndex: hitIndex,\n          query: finalAroundLatLng,\n          rawAnswer: content\n        });\n      });\n      controls.onHits({\n        hits: hits,\n        query: finalAroundLatLng,\n        rawAnswer: content\n      });\n      return hits;\n    }).then(cb)[\"catch\"](function (e) {\n      if (e.statusCode === 403 && e.message === 'Invalid Application-ID or API key') {\n        controls.onInvalidCredentials();\n        return;\n      } else if (e.statusCode === 429) {\n        controls.onRateLimitReached();\n        return;\n      }\n\n      controls.onError(e);\n    });\n  };\n\n  searcher.configure = function (partial) {\n    var updated = (0, _configure[\"default\"])(_objectSpread(_objectSpread(_objectSpread({}, params), controls), partial));\n    params = filterApplicableParams(updated.params);\n    controls = updated.controls;\n    return searcher;\n  };\n\n  return searcher;\n};\n\nvar _default = createReverseGeocodingSource;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}