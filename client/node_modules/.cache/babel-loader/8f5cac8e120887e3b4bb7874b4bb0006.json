{"ast":null,"code":"import React,{Fragment,useState,useEffect,useRef}from\"react\";import Sheet from'react-modal-sheet';import{Row,Col,Card,CardBody,Button,Container,CardHeader,Media,PopoverBody,PopoverHeader,InputGroupAddon,Input,Label,Form,InputGroup,Popover}from'reactstrap';import\"./styles.css\";import helpers from\"../misc/index.js\";import moment from\"moment\";import ReactPlayer from'react-player';import NotificationManager from\"react-notifications/lib/NotificationManager\";import _ from\"lodash\";import{Picker}from'emoji-mart';import axios from\"axios\";import{connect}from\"react-redux\";import CommentsIndividualPostReturnCommentsHelper from\"./helpers/renderComments/commentsHelper.js\";import{useForm}from'react-hook-form';import CommentsIndividualPostHelper from\"./helpers/renderComments/otherHelpers/reactHookForm.js\";import otherHelpers from\"./helpers/renderComments/otherHelpers/helperFunctions.js\";import FileViewer from'react-file-viewer';const{calculateFileType}=otherHelpers;const checkMessageMeetsCritera=CommentsIndividualPostHelper().checkMessageMeetsCritera;const{renderProfilePicVideoPost}=helpers;// Main function for this file is at/near the very bottom of this file... it's called <ViewPostFileContentHelper />\nconst renderGridImageOrVideo=file=>{console.log(\"FUCK...file.... \",file);if(typeof file!==\"undefined\"&&file!==null){const filePathLink=\"\".concat(process.env.REACT_APP_ASSET_LINK,\"/\").concat(file.link);if(file.type.includes(\"video\")){// video logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"single-post-display-video-wrapper-pane\"},/*#__PURE__*/React.createElement(ReactPlayer,{playing:true,loop:true,muted:true,width:\"100%\",height:\"100%\",className:\"maxed-out-post-video-custom-pane\",wrapper:\"div\",url:filePathLink}));}else if(file.type.includes(\"image\")){// image logic\nreturn/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"single-post-display-image-wrapper-pane\"},/*#__PURE__*/React.createElement(Media,{className:\"single-post-display-image\",alt:\"post-picture\",src:filePathLink})));}else{console.log(\"NEITHER MATCH.\");// image logic\nreturn/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"align-post-content-picture-file-viewer\"},/*#__PURE__*/React.createElement(FileViewer,{fileType:calculateFileType(file.type),filePath:filePathLink,className:\"single-post-display-image\",onError:err=>console.log(\"error loading file for file-viewer...:\",err)})));}}};const ViewPostFileContentHelper=_ref=>{let{setProfilePosts,comments,setCommentsState,setSelectedPost,setSelectedIndex,selectedIndex,selectedPost,isPostPaneOpen,setPostPaneOpenState,user,userData}=_ref;const[showEmojiPicker,setShowEmojiPicker]=useState(false);const{register,handleSubmit,getValues,setValue,setError,clearErrors,formState:{errors}}=useForm({mode:\"onTouched\",reValidateMode:\"onBlur\"});const currentValues=getValues();const addEmoji=emoji=>{const text=\"\".concat(currentValues.comment).concat(emoji.native);// close picker\nsetShowEmojiPicker(false);// update comment string value\nsetValue(\"comment\",text,{shouldValidate:false});};useEffect(()=>{console.log(\"comments update viewContent.js ran...\");setCommentsState(comments);},[comments]);const handleRespondEmoji=reaction=>{console.log(\"handleRespondEmoji clicked/run...:\",reaction);const config={reaction,reactorID:userData.uniqueId,posterID:user.uniqueId,relatedPosterPostID:selectedPost.uniqueId};axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/react/posting/hacker/profile/individual\"),config).then(res=>{if(res.data.message===\"Successfully reacted to post!\"){console.log(res.data);const{post,index}=res.data;NotificationManager.success(\"You've successfully reacted with an emoji to this user's specific post! If you'd like to remove this reaction, simply react with any of the emoji's again & it'll revoke your response.\",\"Successfully reacted to post!\",4750);setSelectedPost({...post,files:post.uploadedRelevantFiles,index});}else if(res.data.message===\"Successfully REMOVED reaction to post!\"){const{post,index}=res.data;setSelectedPost({...post,files:post.uploadedRelevantFiles,index});NotificationManager.info(\"We've successfully REMOVED your previous reaction as you've already reacted to this post, if you didn't mean to remove this reaction, simply react with same emoji again...\",\"Successfully removed previous reaction!\",4750);}else{console.log(\"Err\",res.data);NotificationManager.error(\"An error occurred while attempting to react to this specific post with the appropriate emoji, Try again & contact support if the issue persists.\",\"Error reacting to post!\",4750);}}).catch(err=>{console.log(err);});};const shiftActiveFileLeft=()=>{// shift file to left\nif(selectedIndex>0){setSelectedIndex(prevState=>prevState-1);}else{NotificationManager.warning(\"You cannot proceed any further to the left as you are currently on the FIRST ITEM, if you wish to see the other files...Go the opposite direction.\",\"No more file's this direction!\",4500);}};const shiftActiveFileRight=()=>{// shift file to right\nif(selectedIndex<4){setSelectedIndex(prevState=>prevState+1);}else{NotificationManager.warning(\"You cannot proceed any further to the right as you are currently on the LAST ITEM, if you wish to see the other files...Go the opposite direction.\",\"No more file's this direction!\",4500);}};// leave a comment helper function\nconst onSubmitForm=formData=>{console.log(\"onSubmitForm submitted form properly...!:\",formData);const{comment}=formData;const configuration={id:userData.uniqueId,specificPostId:selectedPost.uniqueId,profileID:user.uniqueId,comment,firstName:userData.firstName,lastName:userData.lastName,accountType:userData.accountType,mostRecentProfilePicVideo:typeof userData.profilePicsVideos!==\"undefined\"&&userData.profilePicsVideos.length>0?userData.profilePicsVideos[userData.profilePicsVideos.length-1]:null};axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/post/new/comment/hacker/timeline/profile/individual\"),configuration).then(res=>{if(res.data.message===\"Successfully posted comment!\"){console.log(res.data);const{updatedComments,posts,index,post}=res.data;setValue(\"comment\",\"\",{shouldValidate:false});// setProfilePosts(posts);\nsetSelectedPost({...post,files:post.uploadedRelevantFiles,index});NotificationManager.success(\"Successfully posted your desired comment, we've successfully updated this listing data & notified the owner of these changes!\",\"Successfully posted a new comment!\",4750);}else{console.log(\"Err\",res.data);NotificationManager.error(\"An unknown error occurred while attempting to post your desired comment, please try again & if this problem persists, please contact our support team!\",\"Failed to post your desired comment!\",4750);}}).catch(err=>{console.log(err);NotificationManager.error(\"An unknown error occurred while attempting to post your desired comment, please try again & if this problem persists, please contact our support team!\",\"Failed to post your desired comment!\",4750);});};const renderFormErrors=errors=>{console.log(\"renderFormErrors\",errors);};console.log(\"selectedPostieeeeeeee\",selectedPost,selectedIndex);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Sheet,{className:\"sheet-single-post-content\",isOpen:isPostPaneOpen,onClose:()=>setPostPaneOpenState(false)},/*#__PURE__*/React.createElement(Sheet.Container,null,/*#__PURE__*/React.createElement(Sheet.Header,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"12\",lg:\"12\",xl:\"12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"close-btn-spacer\"},/*#__PURE__*/React.createElement(Button,{onClick:()=>setPostPaneOpenState(false),outline:true,className:\"btn-square-danger\",color:\"danger-2x\",style:{width:\"100%\"}},\"Close/Exit This Pane Content\"))))),/*#__PURE__*/React.createElement(Sheet.Content,null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit(onSubmitForm,errors=>renderFormErrors(errors))},/*#__PURE__*/React.createElement(Row,{className:\"main-container-post-row\"},/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"12\",lg:\"12\",xl:\"12\"},/*#__PURE__*/React.createElement(Card,{className:\"negative-index-card\"},/*#__PURE__*/React.createElement(CardHeader,{className:\"b-l-primary border-3\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Comment, React & Participate in this post's other comment's & active participants. You can post comments & react to this post and/or comments from this current pane/slider...\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Card,{className:\"add-shadow-general-card-profile\"},/*#__PURE__*/React.createElement(CardBody,{className:\"sheet-individual-post-body\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"5\",lg:\"5\",xl:\"5\"},renderGridImageOrVideo(selectedPost.files[selectedIndex])),/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"7\",lg:\"7\",xl:\"7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"new-users-social\"},/*#__PURE__*/React.createElement(Media,null,renderProfilePicVideoPost(user.profilePicsVideos),/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(\"h6\",{className:\"mb-0 f-w-700\"},\"\".concat(user.firstName,\" \").concat(user.lastName)),/*#__PURE__*/React.createElement(\"p\",null,\"Posted \",moment(selectedPost.date).fromNow())),/*#__PURE__*/React.createElement(\"span\",{className:\"pull-right mt-0\"},/*#__PURE__*/React.createElement(\"i\",{onClick:()=>shiftActiveFileLeft(),className:\"fa fa-caret-square-o-left icon-spacer-right-pane fa-4x\",\"aria-hidden\":\"true\"}),/*#__PURE__*/React.createElement(\"i\",{onClick:()=>shiftActiveFileRight(),className:\"fa fa-caret-square-o-right icon-spacer-right-pane fa-4x\",\"aria-hidden\":\"true\"})))),/*#__PURE__*/React.createElement(\"div\",{style:{paddingBottom:\"12.5px\"},className:\"timeline-content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"post-title-main\"},selectedPost.title)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-content\",id:\"override-timeline-content-pane\"},/*#__PURE__*/React.createElement(\"p\",null,selectedPost.description),/*#__PURE__*/React.createElement(Row,{id:\"special-popover-row\"},/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.sunglasses),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"sunglasses\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/sunglasses.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.steaming),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"steaming\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/steaming.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.tearsOfJoy),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"tearsOfJoy\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.vomitting),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"vomitting\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/vomitting.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.partying),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"partying\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/partying.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"1\",lg:\"1\",xl:\"1\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"emoji-reaction-count-post\"},selectedPost.reactions.screaming),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"screaming\"),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/screaming.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"12\",md:\"6\",lg:\"6\",xl:\"6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"like-content custom-like-response-zone\"},/*#__PURE__*/React.createElement(\"span\",{className:\"pull-right comment-number\"},/*#__PURE__*/React.createElement(\"span\",null,\"20\",\" \"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-share-alt mr-0\"}))),/*#__PURE__*/React.createElement(\"span\",{className:\"pull-right comment-number\"},/*#__PURE__*/React.createElement(\"span\",null,selectedPost.comments.length,\" \"),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-comments-o\"}))))))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-content\",id:\"override-timeline-content-pane\"},/*#__PURE__*/React.createElement(\"div\",{className:\"comments-box\"},/*#__PURE__*/React.createElement(Media,null,/*#__PURE__*/React.createElement(Media,{className:\"img-50 img-fluid m-r-20\",alt:\"\",src:require(\"../../../../../../../assets/gifs/typing-black.gif\")}),/*#__PURE__*/React.createElement(Media,{body:true},/*#__PURE__*/React.createElement(InputGroup,{className:\"text-box\"},/*#__PURE__*/React.createElement(Input,Object.assign({},checkMessageMeetsCritera.check(setError,register,clearErrors,\"comment\"),{onChange:e=>{checkMessageMeetsCritera.onChange(e,\"comment\",setValue);const caret=e.target.selectionStart;const element=e.target;window.requestAnimationFrame(()=>{element.selectionStart=caret;element.selectionEnd=caret;});},value:currentValues.comment,name:\"comment\",className:\"form-control input-txt-bx write-comment-post\",type:\"text\",placeholder:checkMessageMeetsCritera.placeholder})),/*#__PURE__*/React.createElement(InputGroupAddon,{style:{marginLeft:\"17.5px\"},addonType:\"append\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",className:\"btn-square-secondary\",color:\"secondary\"},\"Submit Comment!\")),/*#__PURE__*/React.createElement(InputGroupAddon,{addonType:\"append\"},/*#__PURE__*/React.createElement(\"i\",{onClick:()=>setShowEmojiPicker(!showEmojiPicker),className:\"fa fa-smile-o fa-3x restyle-emoji-activator-icon\",\"aria-hidden\":\"true\"}),showEmojiPicker===true?/*#__PURE__*/React.createElement(Picker,{style:{position:\"absolute\",right:\"40px\",top:\"-375px\"},set:\"apple\",emojiSize:30,onSelect:addEmoji}):null)),errors.comment?/*#__PURE__*/React.createElement(\"span\",{className:\"span-tooltip\"},errors.comment.message):null))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(CommentsIndividualPostReturnCommentsHelper,{comments:comments,setCommentsState:setCommentsState,data:selectedPost,userData:userData})))))))))))),/*#__PURE__*/React.createElement(Sheet.Backdrop,null)));};const mapStateToProps=state=>{return{userData:state.auth.data};};export default connect(mapStateToProps,{})(ViewPostFileContentHelper);","map":{"version":3,"sources":["/home/kali/Documents/cybersecurity-bounty-hunting-platform/client/src/components/dashboard/people/hackers/individualProfile/helpers/viewPostFileContents/viewContent.js"],"names":["React","Fragment","useState","useEffect","useRef","Sheet","Row","Col","Card","CardBody","Button","Container","CardHeader","Media","PopoverBody","PopoverHeader","InputGroupAddon","Input","Label","Form","InputGroup","Popover","helpers","moment","ReactPlayer","NotificationManager","_","Picker","axios","connect","CommentsIndividualPostReturnCommentsHelper","useForm","CommentsIndividualPostHelper","otherHelpers","FileViewer","calculateFileType","checkMessageMeetsCritera","renderProfilePicVideoPost","renderGridImageOrVideo","file","console","log","filePathLink","process","env","REACT_APP_ASSET_LINK","link","type","includes","err","ViewPostFileContentHelper","setProfilePosts","comments","setCommentsState","setSelectedPost","setSelectedIndex","selectedIndex","selectedPost","isPostPaneOpen","setPostPaneOpenState","user","userData","showEmojiPicker","setShowEmojiPicker","register","handleSubmit","getValues","setValue","setError","clearErrors","formState","errors","mode","reValidateMode","currentValues","addEmoji","emoji","text","comment","native","shouldValidate","handleRespondEmoji","reaction","config","reactorID","uniqueId","posterID","relatedPosterPostID","post","REACT_APP_BASE_URL","then","res","data","message","index","success","files","uploadedRelevantFiles","info","error","catch","shiftActiveFileLeft","prevState","warning","shiftActiveFileRight","onSubmitForm","formData","configuration","id","specificPostId","profileID","firstName","lastName","accountType","mostRecentProfilePicVideo","profilePicsVideos","length","updatedComments","posts","renderFormErrors","width","date","fromNow","paddingBottom","title","description","reactions","sunglasses","require","steaming","tearsOfJoy","vomitting","partying","screaming","check","e","onChange","caret","target","selectionStart","element","window","requestAnimationFrame","selectionEnd","placeholder","marginLeft","position","right","top","mapStateToProps","state","auth"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,CAA+CC,MAA/C,KAA6D,OAA7D,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,IAAnB,CAAyBC,QAAzB,CAAmCC,MAAnC,CAA2CC,SAA3C,CAAsDC,UAAtD,CAAkEC,KAAlE,CAAyEC,WAAzE,CAAsFC,aAAtF,CAAqGC,eAArG,CAAsHC,KAAtH,CAA6HC,KAA7H,CAAoIC,IAApI,CAA0IC,UAA1I,CAAsJC,OAAtJ,KAAqK,YAArK,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,mBAAP,KAAgC,6CAAhC,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,MAAT,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,0CAAP,KAAuD,4CAAvD,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,4BAAP,KAAyC,wDAAzC,CACA,MAAOC,CAAAA,YAAP,KAAyB,0DAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CAGA,KAAM,CAAEC,iBAAF,EAAwBF,YAA9B,CAEA,KAAMG,CAAAA,wBAAwB,CAAGJ,4BAA4B,GAAGI,wBAAhE,CAEA,KAAM,CAAEC,yBAAF,EAAgCf,OAAtC,CAEA;AAEA,KAAMgB,CAAAA,sBAAsB,CAAIC,IAAD,EAAU,CACrCC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCF,IAAhC,EACA,GAAI,MAAOA,CAAAA,IAAP,GAAgB,WAAhB,EAA+BA,IAAI,GAAK,IAA5C,CAAkD,CAC9C,KAAMG,CAAAA,YAAY,WAAMC,OAAO,CAACC,GAAR,CAAYC,oBAAlB,aAA0CN,IAAI,CAACO,IAA/C,CAAlB,CACA,GAAIP,IAAI,CAACQ,IAAL,CAAUC,QAAV,CAAmB,OAAnB,CAAJ,CAAiC,CAC7B;AACA,mBACI,oBAAC,KAAD,EAAO,SAAS,CAAE,wCAAlB,eACI,oBAAC,WAAD,EAAa,OAAO,CAAE,IAAtB,CAA4B,IAAI,CAAE,IAAlC,CAAwC,KAAK,CAAE,IAA/C,CAAqD,KAAK,CAAE,MAA5D,CAAoE,MAAM,CAAE,MAA5E,CAAoF,SAAS,CAAE,kCAA/F,CAAmI,OAAO,CAAE,KAA5I,CAAmJ,GAAG,CAAEN,YAAxJ,EADJ,CADJ,CAKH,CAPD,IAOO,IAAIH,IAAI,CAACQ,IAAL,CAAUC,QAAV,CAAmB,OAAnB,CAAJ,CAAiC,CACpC;AACA,mBACI,oBAAC,QAAD,mBACI,2BAAK,SAAS,CAAE,wCAAhB,eACI,oBAAC,KAAD,EAAO,SAAS,CAAC,2BAAjB,CAA6C,GAAG,CAAC,cAAjD,CAAgE,GAAG,CAAEN,YAArE,EADJ,CADJ,CADJ,CAOH,CATM,IASA,CACHF,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAEA;AACA,mBACI,oBAAC,QAAD,mBACI,2BAAK,SAAS,CAAE,wCAAhB,eACI,oBAAC,UAAD,EACI,QAAQ,CAAEN,iBAAiB,CAACI,IAAI,CAACQ,IAAN,CAD/B,CAEI,QAAQ,CAAEL,YAFd,CAGI,SAAS,CAAE,2BAHf,CAII,OAAO,CAAGO,GAAD,EAAST,OAAO,CAACC,GAAR,CAAY,wCAAZ,CAAsDQ,GAAtD,CAJtB,EADJ,CADJ,CADJ,CAYH,CACJ,CACJ,CAtCD,CAuCA,KAAMC,CAAAA,yBAAyB,CAAG,MAA4K,IAA3K,CAAEC,eAAF,CAAmBC,QAAnB,CAA6BC,gBAA7B,CAA+CC,eAA/C,CAAgEC,gBAAhE,CAAkFC,aAAlF,CAAiGC,YAAjG,CAA+GC,cAA/G,CAAgIC,oBAAhI,CAAsJC,IAAtJ,CAA4JC,QAA5J,CAA2K,MAE1M,KAAM,CAAEC,eAAF,CAAmBC,kBAAnB,EAA0C7D,QAAQ,CAAC,KAAD,CAAxD,CAEA,KAAM,CAAE8D,QAAF,CAAYC,YAAZ,CAA0BC,SAA1B,CAAqCC,QAArC,CAA+CC,QAA/C,CAAyDC,WAAzD,CAAsEC,SAAS,CAAE,CAAEC,MAAF,CAAjF,EAA+FxC,OAAO,CAAC,CACzGyC,IAAI,CAAE,WADmG,CAEzGC,cAAc,CAAE,QAFyF,CAAD,CAA5G,CAKA,KAAMC,CAAAA,aAAa,CAAGR,SAAS,EAA/B,CAEA,KAAMS,CAAAA,QAAQ,CAAIC,KAAD,EAAY,CACzB,KAAMC,CAAAA,IAAI,WAAMH,aAAa,CAACI,OAApB,SAA8BF,KAAK,CAACG,MAApC,CAAV,CACA;AACAhB,kBAAkB,CAAC,KAAD,CAAlB,CACA;AACAI,QAAQ,CAAC,SAAD,CAAYU,IAAZ,CAAkB,CAAEG,cAAc,CAAE,KAAlB,CAAlB,CAAR,CACH,CAND,CAQA7E,SAAS,CAAC,IAAM,CACZqC,OAAO,CAACC,GAAR,CAAY,uCAAZ,EAEAY,gBAAgB,CAACD,QAAD,CAAhB,CACH,CAJQ,CAIN,CAACA,QAAD,CAJM,CAAT,CAMA,KAAM6B,CAAAA,kBAAkB,CAAIC,QAAD,EAAc,CACrC1C,OAAO,CAACC,GAAR,CAAY,oCAAZ,CAAkDyC,QAAlD,EAEA,KAAMC,CAAAA,MAAM,CAAG,CACXD,QADW,CAEXE,SAAS,CAAEvB,QAAQ,CAACwB,QAFT,CAGXC,QAAQ,CAAE1B,IAAI,CAACyB,QAHJ,CAIXE,mBAAmB,CAAE9B,YAAY,CAAC4B,QAJvB,CAAf,CAOAzD,KAAK,CAAC4D,IAAN,WAAc7C,OAAO,CAACC,GAAR,CAAY6C,kBAA1B,6CAAwFN,MAAxF,EAAgGO,IAAhG,CAAsGC,GAAD,EAAS,CAC1G,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAT,GAAqB,+BAAzB,CAA0D,CACtDrD,OAAO,CAACC,GAAR,CAAYkD,GAAG,CAACC,IAAhB,EAEA,KAAM,CAAEJ,IAAF,CAAQM,KAAR,EAAkBH,GAAG,CAACC,IAA5B,CAEAnE,mBAAmB,CAACsE,OAApB,CAA4B,yLAA5B,CAAuN,+BAAvN,CAAwP,IAAxP,EAEAzC,eAAe,CAAC,CACZ,GAAGkC,IADS,CAEZQ,KAAK,CAAER,IAAI,CAACS,qBAFA,CAGZH,KAHY,CAAD,CAAf,CAKH,CAZD,IAYO,IAAIH,GAAG,CAACC,IAAJ,CAASC,OAAT,GAAqB,wCAAzB,CAAmE,CACtE,KAAM,CAAEL,IAAF,CAAQM,KAAR,EAAkBH,GAAG,CAACC,IAA5B,CAEAtC,eAAe,CAAC,CACZ,GAAGkC,IADS,CAEZQ,KAAK,CAAER,IAAI,CAACS,qBAFA,CAGZH,KAHY,CAAD,CAAf,CAMArE,mBAAmB,CAACyE,IAApB,CAAyB,6KAAzB,CAAwM,yCAAxM,CAAmP,IAAnP,EACH,CAVM,IAUA,CACH1D,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBkD,GAAG,CAACC,IAAvB,EAEAnE,mBAAmB,CAAC0E,KAApB,CAA0B,kJAA1B,CAA8K,yBAA9K,CAAyM,IAAzM,EACH,CACJ,CA5BD,EA4BGC,KA5BH,CA4BUnD,GAAD,EAAS,CACdT,OAAO,CAACC,GAAR,CAAYQ,GAAZ,EACH,CA9BD,EA+BH,CAzCD,CA0CA,KAAMoD,CAAAA,mBAAmB,CAAG,IAAM,CAC9B;AACA,GAAI7C,aAAa,CAAG,CAApB,CAAuB,CACnBD,gBAAgB,CAAC+C,SAAS,EAAIA,SAAS,CAAG,CAA1B,CAAhB,CACH,CAFD,IAEO,CACH7E,mBAAmB,CAAC8E,OAApB,CAA4B,oJAA5B,CAAkL,gCAAlL,CAAoN,IAApN,EACH,CACJ,CAPD,CAQA,KAAMC,CAAAA,oBAAoB,CAAG,IAAM,CAC/B;AACA,GAAIhD,aAAa,CAAG,CAApB,CAAuB,CACnBD,gBAAgB,CAAC+C,SAAS,EAAIA,SAAS,CAAG,CAA1B,CAAhB,CACH,CAFD,IAEO,CACH7E,mBAAmB,CAAC8E,OAApB,CAA4B,oJAA5B,CAAkL,gCAAlL,CAAoN,IAApN,EACH,CACJ,CAPD,CAQA;AACA,KAAME,CAAAA,YAAY,CAAIC,QAAD,EAAc,CAC/BlE,OAAO,CAACC,GAAR,CAAY,2CAAZ,CAAyDiE,QAAzD,EAEA,KAAM,CAAE5B,OAAF,EAAc4B,QAApB,CAEA,KAAMC,CAAAA,aAAa,CAAG,CAClBC,EAAE,CAAE/C,QAAQ,CAACwB,QADK,CAElBwB,cAAc,CAAEpD,YAAY,CAAC4B,QAFX,CAGlByB,SAAS,CAAElD,IAAI,CAACyB,QAHE,CAIlBP,OAJkB,CAKlBiC,SAAS,CAAElD,QAAQ,CAACkD,SALF,CAMlBC,QAAQ,CAAEnD,QAAQ,CAACmD,QAND,CAOlBC,WAAW,CAAEpD,QAAQ,CAACoD,WAPJ,CAQlBC,yBAAyB,CAAE,MAAOrD,CAAAA,QAAQ,CAACsD,iBAAhB,GAAsC,WAAtC,EAAqDtD,QAAQ,CAACsD,iBAAT,CAA2BC,MAA3B,CAAoC,CAAzF,CAA6FvD,QAAQ,CAACsD,iBAAT,CAA2BtD,QAAQ,CAACsD,iBAAT,CAA2BC,MAA3B,CAAoC,CAA/D,CAA7F,CAAiK,IAR1K,CAAtB,CAWAxF,KAAK,CAAC4D,IAAN,WAAc7C,OAAO,CAACC,GAAR,CAAY6C,kBAA1B,yDAAoGkB,aAApG,EAAmHjB,IAAnH,CAAyHC,GAAD,EAAS,CAC7H,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAT,GAAqB,8BAAzB,CAAyD,CACrDrD,OAAO,CAACC,GAAR,CAAYkD,GAAG,CAACC,IAAhB,EAEA,KAAM,CAAEyB,eAAF,CAAmBC,KAAnB,CAA0BxB,KAA1B,CAAiCN,IAAjC,EAA0CG,GAAG,CAACC,IAApD,CAEAzB,QAAQ,CAAC,SAAD,CAAY,EAAZ,CAAgB,CAAEa,cAAc,CAAE,KAAlB,CAAhB,CAAR,CAEA;AAEA1B,eAAe,CAAC,CACZ,GAAGkC,IADS,CAEZQ,KAAK,CAAER,IAAI,CAACS,qBAFA,CAGZH,KAHY,CAAD,CAAf,CAMArE,mBAAmB,CAACsE,OAApB,CAA4B,+HAA5B,CAA6J,oCAA7J,CAAmM,IAAnM,EAEH,CAjBD,IAiBO,CACHvD,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBkD,GAAG,CAACC,IAAvB,EAEAnE,mBAAmB,CAAC0E,KAApB,CAA0B,wJAA1B,CAAoL,sCAApL,CAA4N,IAA5N,EACH,CACJ,CAvBD,EAuBGC,KAvBH,CAuBUnD,GAAD,EAAS,CACdT,OAAO,CAACC,GAAR,CAAYQ,GAAZ,EAEAxB,mBAAmB,CAAC0E,KAApB,CAA0B,wJAA1B,CAAoL,sCAApL,CAA4N,IAA5N,EACH,CA3BD,EA4BH,CA5CD,CA6CA,KAAMoB,CAAAA,gBAAgB,CAAIhD,MAAD,EAAY,CACjC/B,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgC8B,MAAhC,EACH,CAFD,CAGA/B,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCgB,YAArC,CAAmDD,aAAnD,EACA,mBACI,oBAAC,QAAD,mBACI,oBAAC,KAAD,EAAO,SAAS,CAAE,2BAAlB,CAA+C,MAAM,CAAEE,cAAvD,CAAuE,OAAO,CAAE,IAAMC,oBAAoB,CAAC,KAAD,CAA1G,eACI,oBAAC,KAAD,CAAO,SAAP,mBACA,oBAAC,KAAD,CAAO,MAAP,mBACI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAC,IAAR,CAAa,EAAE,CAAC,IAAhB,CAAqB,EAAE,CAAC,IAAxB,CAA6B,EAAE,CAAC,IAAhC,eACI,2BAAK,SAAS,CAAE,kBAAhB,eACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,IAAMA,oBAAoB,CAAC,KAAD,CAA3C,CAAoD,OAAO,KAA3D,CAA4D,SAAS,CAAE,mBAAvE,CAA4F,KAAK,CAAE,WAAnG,CAAgH,KAAK,CAAE,CAAE6D,KAAK,CAAE,MAAT,CAAvH,iCADJ,CADJ,CADJ,CADJ,CADA,cAUI,oBAAC,KAAD,CAAO,OAAP,mBACI,oBAAC,SAAD,EAAW,KAAK,CAAE,IAAlB,eACI,oBAAC,IAAD,EAAM,QAAQ,CAAEvD,YAAY,CAACwC,YAAD,CAAgBlC,MAAD,EAAYgD,gBAAgB,CAAChD,MAAD,CAA3C,CAA5B,eACI,oBAAC,GAAD,EAAK,SAAS,CAAE,yBAAhB,eACI,oBAAC,GAAD,EAAK,EAAE,CAAC,IAAR,CAAa,EAAE,CAAC,IAAhB,CAAqB,EAAE,CAAC,IAAxB,CAA6B,EAAE,CAAC,IAAhC,eACI,oBAAC,IAAD,EAAM,SAAS,CAAE,qBAAjB,eACI,oBAAC,UAAD,EAAY,SAAS,CAAC,sBAAtB,eACI,+MADJ,CADJ,cAII,oBAAC,QAAD,mBACI,oBAAC,IAAD,EAAM,SAAS,CAAE,iCAAjB,eACI,oBAAC,QAAD,EAAU,SAAS,CAAE,4BAArB,eACI,oBAAC,GAAD,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAC,IAAR,CAAa,EAAE,CAAC,GAAhB,CAAoB,EAAE,CAAC,GAAvB,CAA2B,EAAE,CAAC,GAA9B,EACKjC,sBAAsB,CAACmB,YAAY,CAACuC,KAAb,CAAmBxC,aAAnB,CAAD,CAD3B,CADJ,cAII,oBAAC,GAAD,EAAK,EAAE,CAAC,IAAR,CAAa,EAAE,CAAC,GAAhB,CAAoB,EAAE,CAAC,GAAvB,CAA2B,EAAE,CAAC,GAA9B,eACI,2BAAK,SAAS,CAAC,kBAAf,eACI,oBAAC,KAAD,MACKnB,yBAAyB,CAACuB,IAAI,CAACuD,iBAAN,CAD9B,cAEI,oBAAC,KAAD,EAAO,IAAI,KAAX,eACI,0BAAI,SAAS,CAAC,cAAd,YAAiCvD,IAAI,CAACmD,SAAtC,aAAmDnD,IAAI,CAACoD,QAAxD,EADJ,cAEI,uCAAWzF,MAAM,CAACkC,YAAY,CAACgE,IAAd,CAAN,CAA0BC,OAA1B,EAAX,CAFJ,CAFJ,cAKY,4BAAM,SAAS,CAAC,iBAAhB,eAAkC,yBAAG,OAAO,CAAE,IAAMrB,mBAAmB,EAArC,CAAyC,SAAS,CAAC,wDAAnD,CAA4G,cAAY,MAAxH,EAAlC,cAAqK,yBAAG,OAAO,CAAE,IAAMG,oBAAoB,EAAtC,CAA0C,SAAS,CAAC,yDAApD,CAA8G,cAAY,MAA1H,EAArK,CALZ,CADJ,CADJ,cAYI,2BAAK,KAAK,CAAE,CAAEmB,aAAa,CAAE,QAAjB,CAAZ,CAAyC,SAAS,CAAC,kBAAnD,eACI,yBAAG,SAAS,CAAE,iBAAd,EACKlE,YAAY,CAACmE,KADlB,CADJ,CAZJ,cAiBI,8BAjBJ,cAkBI,2BAAK,SAAS,CAAC,kBAAf,CAAkC,EAAE,CAAE,gCAAtC,eACI,6BACKnE,YAAY,CAACoE,WADlB,CADJ,cAII,oBAAC,GAAD,EAAK,EAAE,CAAE,qBAAT,eACI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CpE,YAAY,CAACqE,SAAb,CAAuBC,UAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAM9C,kBAAkB,CAAC,YAAD,CAAtC,CAAsD,SAAS,CAAE,sBAAjE,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,iDAAD,CAA1D,EADJ,CAFJ,CADJ,cAOI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CvE,YAAY,CAACqE,SAAb,CAAuBG,QAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAMhD,kBAAkB,CAAC,UAAD,CAAtC,CAAoD,SAAS,CAAE,sBAA/D,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,+CAAD,CAA1D,EADJ,CAFJ,CAPJ,cAaI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CvE,YAAY,CAACqE,SAAb,CAAuBI,UAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAMjD,kBAAkB,CAAC,YAAD,CAAtC,CAAsD,SAAS,CAAE,sBAAjE,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,iDAAD,CAA1D,EADJ,CAFJ,CAbJ,cAmBI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CvE,YAAY,CAACqE,SAAb,CAAuBK,SAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAMlD,kBAAkB,CAAC,WAAD,CAAtC,CAAqD,SAAS,CAAE,sBAAhE,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,gDAAD,CAA1D,EADJ,CAFJ,CAnBJ,cAyBI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CvE,YAAY,CAACqE,SAAb,CAAuBM,QAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAMnD,kBAAkB,CAAC,UAAD,CAAtC,CAAoD,SAAS,CAAE,sBAA/D,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,+CAAD,CAA1D,EADJ,CAFJ,CAzBJ,cA+BI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,GAAvC,CAA2C,EAAE,CAAC,GAA9C,CAAkD,EAAE,CAAC,GAArD,CAAyD,EAAE,CAAC,GAA5D,eACI,0BAAI,SAAS,CAAE,2BAAf,EAA6CvE,YAAY,CAACqE,SAAb,CAAuBO,SAApE,CADJ,cAEI,2BAAK,OAAO,CAAE,IAAMpD,kBAAkB,CAAC,WAAD,CAAtC,CAAqD,SAAS,CAAE,sBAAhE,eACI,2BAAK,SAAS,CAAE,4BAAhB,CAA8C,GAAG,CAAE+C,OAAO,CAAC,gDAAD,CAA1D,EADJ,CAFJ,CA/BJ,cAqCI,oBAAC,GAAD,EAAK,SAAS,CAAE,kBAAhB,CAAoC,EAAE,CAAC,IAAvC,CAA4C,EAAE,CAAC,GAA/C,CAAmD,EAAE,CAAC,GAAtD,CAA0D,EAAE,CAAC,GAA7D,eACI,2BAAK,SAAS,CAAC,wCAAf,eAAwD,4BAAM,SAAS,CAAC,2BAAhB,eAA4C,gCAAO,IAAP,KAA5C,cAAgE,6CAAM,yBAAG,SAAS,CAAC,sBAAb,EAAN,CAAhE,CAAxD,cAAoL,4BAAM,SAAS,CAAC,2BAAhB,eAA4C,gCAAOvE,YAAY,CAACL,QAAb,CAAsBgE,MAA7B,KAA5C,cAAwF,6CAAM,yBAAG,SAAS,CAAC,kBAAb,EAAN,CAAxF,CAApL,CADJ,CArCJ,CAJJ,CAlBJ,CAJJ,CADJ,cAuEI,oBAAC,GAAD,mBACI,2BAAK,SAAS,CAAC,kBAAf,CAAkC,EAAE,CAAE,gCAAtC,eACI,2BAAK,SAAS,CAAC,cAAf,eACI,oBAAC,KAAD,mBACI,oBAAC,KAAD,EAAO,SAAS,CAAC,yBAAjB,CAA2C,GAAG,CAAC,EAA/C,CAAkD,GAAG,CAAEY,OAAO,CAAC,mDAAD,CAA9D,EADJ,cAEI,oBAAC,KAAD,EAAO,IAAI,KAAX,eACI,oBAAC,UAAD,EAAY,SAAS,CAAC,UAAtB,eACI,oBAAC,KAAD,kBAAW5F,wBAAwB,CAACkG,KAAzB,CAA+BlE,QAA/B,CAAyCJ,QAAzC,CAAmDK,WAAnD,CAAgE,SAAhE,CAAX,EAAuF,QAAQ,CAAGkE,CAAD,EAAO,CAEpGnG,wBAAwB,CAACoG,QAAzB,CAAkCD,CAAlC,CAAqC,SAArC,CAAgDpE,QAAhD,EAEA,KAAMsE,CAAAA,KAAK,CAAGF,CAAC,CAACG,MAAF,CAASC,cAAvB,CACA,KAAMC,CAAAA,OAAO,CAAGL,CAAC,CAACG,MAAlB,CACAG,MAAM,CAACC,qBAAP,CAA6B,IAAM,CAC/BF,OAAO,CAACD,cAAR,CAAyBF,KAAzB,CACAG,OAAO,CAACG,YAAR,CAAuBN,KAAvB,CACH,CAHD,EAIH,CAVD,CAUG,KAAK,CAAE/D,aAAa,CAACI,OAVxB,CAUiC,IAAI,CAAE,SAVvC,CAUkD,SAAS,CAAE,8CAV7D,CAU6G,IAAI,CAAE,MAVnH,CAU2H,WAAW,CAAE1C,wBAAwB,CAAC4G,WAVjK,GADJ,cAYI,oBAAC,eAAD,EAAiB,KAAK,CAAE,CAAEC,UAAU,CAAE,QAAd,CAAxB,CAAkD,SAAS,CAAC,QAA5D,eACI,oBAAC,MAAD,EAAQ,IAAI,CAAE,QAAd,CAAwB,SAAS,CAAE,sBAAnC,CAA2D,KAAK,CAAE,WAAlE,oBADJ,CAZJ,cAeI,oBAAC,eAAD,EAAiB,SAAS,CAAC,QAA3B,eACI,yBAAG,OAAO,CAAE,IAAMlF,kBAAkB,CAAC,CAACD,eAAF,CAApC,CAAwD,SAAS,CAAC,kDAAlE,CAAqH,cAAY,MAAjI,EADJ,CAEKA,eAAe,GAAK,IAApB,cACO,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEoF,QAAQ,CAAE,UAAZ,CAAwBC,KAAK,CAAE,MAA/B,CAAuCC,GAAG,CAAE,QAA5C,CAAf,CAAuE,GAAG,CAAC,OAA3E,CAAmF,SAAS,CAAE,EAA9F,CAAkG,QAAQ,CAAEzE,QAA5G,EADP,CAEG,IAJR,CAfJ,CADJ,CAuBKJ,MAAM,CAACO,OAAP,cAAiB,4BAAM,SAAS,CAAC,cAAhB,EAAgCP,MAAM,CAACO,OAAP,CAAee,OAA/C,CAAjB,CAAkF,IAvBvF,CAFJ,CADJ,CADJ,CADJ,CAvEJ,cAyGI,oBAAC,GAAD,mBACI,oBAAC,0CAAD,EAA4C,QAAQ,CAAEzC,QAAtD,CAAgE,gBAAgB,CAAEC,gBAAlF,CAAoG,IAAI,CAAEI,YAA1G,CAAwH,QAAQ,CAAEI,QAAlI,EADJ,CAzGJ,CADJ,CADJ,CAJJ,CADJ,CADJ,CADJ,CADJ,CADJ,CAVJ,CADJ,cA4II,oBAAC,KAAD,CAAO,QAAP,MA5IJ,CADJ,CADJ,CAkJH,CAvRD,CAwRA,KAAMwF,CAAAA,eAAe,CAAIC,KAAD,EAAW,CAC/B,MAAO,CACHzF,QAAQ,CAAEyF,KAAK,CAACC,IAAN,CAAW3D,IADlB,CAAP,CAGH,CAJD,CAKA,cAAe/D,CAAAA,OAAO,CAACwH,eAAD,CAAkB,EAAlB,CAAP,CAA8BnG,yBAA9B,CAAf","sourcesContent":["import React, { Fragment, useState, useEffect, useRef } from \"react\";\nimport Sheet from 'react-modal-sheet';\nimport { Row, Col, Card, CardBody, Button, Container, CardHeader, Media, PopoverBody, PopoverHeader, InputGroupAddon, Input, Label, Form, InputGroup, Popover } from 'reactstrap';\nimport \"./styles.css\";\nimport helpers from \"../misc/index.js\";\nimport moment from \"moment\";\nimport ReactPlayer from 'react-player';\nimport NotificationManager from \"react-notifications/lib/NotificationManager\";\nimport _ from \"lodash\";\nimport { Picker } from 'emoji-mart';\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport CommentsIndividualPostReturnCommentsHelper from \"./helpers/renderComments/commentsHelper.js\";\nimport { useForm } from 'react-hook-form';\nimport CommentsIndividualPostHelper from \"./helpers/renderComments/otherHelpers/reactHookForm.js\";\nimport otherHelpers from \"./helpers/renderComments/otherHelpers/helperFunctions.js\";\nimport FileViewer from 'react-file-viewer';\n\n\nconst { calculateFileType } = otherHelpers;\n\nconst checkMessageMeetsCritera = CommentsIndividualPostHelper().checkMessageMeetsCritera;\n\nconst { renderProfilePicVideoPost } = helpers;\n\n// Main function for this file is at/near the very bottom of this file... it's called <ViewPostFileContentHelper />\n\nconst renderGridImageOrVideo = (file) => {\n    console.log(\"FUCK...file.... \", file);\n    if (typeof file !== \"undefined\" && file !== null) {\n        const filePathLink = `${process.env.REACT_APP_ASSET_LINK}/${file.link}`;\n        if (file.type.includes(\"video\")) {\n            // video logic\n            return (\n                <Media className={\"single-post-display-video-wrapper-pane\"}>\n                    <ReactPlayer playing={true} loop={true} muted={true} width={\"100%\"} height={\"100%\"} className={\"maxed-out-post-video-custom-pane\"} wrapper={\"div\"} url={filePathLink} />\n                </Media>\n            );\n        } else if (file.type.includes(\"image\")) {\n            // image logic\n            return (\n                <Fragment>\n                    <div className={\"single-post-display-image-wrapper-pane\"}>\n                        <Media className=\"single-post-display-image\" alt=\"post-picture\" src={filePathLink} />\n                    </div>\n                </Fragment>\n            );\n        } else {\n            console.log(\"NEITHER MATCH.\");\n\n            // image logic\n            return (\n                <Fragment>\n                    <div className={\"align-post-content-picture-file-viewer\"}>\n                        <FileViewer\n                            fileType={calculateFileType(file.type)}\n                            filePath={filePathLink}\n                            className={\"single-post-display-image\"}\n                            onError={(err) => console.log(\"error loading file for file-viewer...:\", err)}\n                        />\n                    </div>\n                </Fragment>\n            );\n        }\n    }\n}\nconst ViewPostFileContentHelper = ({ setProfilePosts, comments, setCommentsState, setSelectedPost, setSelectedIndex, selectedIndex, selectedPost, isPostPaneOpen,  setPostPaneOpenState, user, userData }) => {\n\n    const [ showEmojiPicker, setShowEmojiPicker ] = useState(false);\n\n    const { register, handleSubmit, getValues, setValue, setError, clearErrors, formState: { errors }} = useForm({\n        mode: \"onTouched\",\n        reValidateMode: \"onBlur\"\n    });\n\n    const currentValues = getValues();\n  \n    const addEmoji = (emoji) =>  {\n        const text = `${currentValues.comment}${emoji.native}`;\n        // close picker\n        setShowEmojiPicker(false);\n        // update comment string value\n        setValue(\"comment\", text, { shouldValidate: false });\n    }\n\n    useEffect(() => {\n        console.log(\"comments update viewContent.js ran...\");\n\n        setCommentsState(comments);\n    }, [comments]);\n\n    const handleRespondEmoji = (reaction) => {\n        console.log(\"handleRespondEmoji clicked/run...:\", reaction);\n\n        const config = {\n            reaction,\n            reactorID: userData.uniqueId,\n            posterID: user.uniqueId, \n            relatedPosterPostID: selectedPost.uniqueId\n        }\n\n        axios.post(`${process.env.REACT_APP_BASE_URL}/react/posting/hacker/profile/individual`, config).then((res) => {\n            if (res.data.message === \"Successfully reacted to post!\") {\n                console.log(res.data);\n\n                const { post, index } = res.data;\n\n                NotificationManager.success(\"You've successfully reacted with an emoji to this user's specific post! If you'd like to remove this reaction, simply react with any of the emoji's again & it'll revoke your response.\", \"Successfully reacted to post!\", 4750);\n\n                setSelectedPost({\n                    ...post,\n                    files: post.uploadedRelevantFiles,\n                    index\n                });\n            } else if (res.data.message === \"Successfully REMOVED reaction to post!\") {\n                const { post, index } = res.data;\n\n                setSelectedPost({\n                    ...post,\n                    files: post.uploadedRelevantFiles,\n                    index\n                });\n\n                NotificationManager.info(\"We've successfully REMOVED your previous reaction as you've already reacted to this post, if you didn't mean to remove this reaction, simply react with same emoji again...\", \"Successfully removed previous reaction!\", 4750);\n            } else {\n                console.log(\"Err\", res.data);\n\n                NotificationManager.error(\"An error occurred while attempting to react to this specific post with the appropriate emoji, Try again & contact support if the issue persists.\", \"Error reacting to post!\", 4750);\n            }\n        }).catch((err) => {\n            console.log(err);\n        })\n    }\n    const shiftActiveFileLeft = () => {\n        // shift file to left\n        if (selectedIndex > 0) {\n            setSelectedIndex(prevState => prevState - 1);\n        } else {\n            NotificationManager.warning(\"You cannot proceed any further to the left as you are currently on the FIRST ITEM, if you wish to see the other files...Go the opposite direction.\", \"No more file's this direction!\", 4500);\n        }\n    }\n    const shiftActiveFileRight = () => {\n        // shift file to right\n        if (selectedIndex < 4) {\n            setSelectedIndex(prevState => prevState + 1);\n        } else {\n            NotificationManager.warning(\"You cannot proceed any further to the right as you are currently on the LAST ITEM, if you wish to see the other files...Go the opposite direction.\", \"No more file's this direction!\", 4500);\n        }\n    }\n    // leave a comment helper function\n    const onSubmitForm = (formData) => {\n        console.log(\"onSubmitForm submitted form properly...!:\", formData);\n\n        const { comment } = formData;\n\n        const configuration = {\n            id: userData.uniqueId,\n            specificPostId: selectedPost.uniqueId,\n            profileID: user.uniqueId,\n            comment,\n            firstName: userData.firstName,\n            lastName: userData.lastName,\n            accountType: userData.accountType,\n            mostRecentProfilePicVideo: typeof userData.profilePicsVideos !== \"undefined\" && userData.profilePicsVideos.length > 0 ? userData.profilePicsVideos[userData.profilePicsVideos.length - 1] : null\n        }\n\n        axios.post(`${process.env.REACT_APP_BASE_URL}/post/new/comment/hacker/timeline/profile/individual`, configuration).then((res) => {\n            if (res.data.message === \"Successfully posted comment!\") {\n                console.log(res.data);\n\n                const { updatedComments, posts, index, post } = res.data;\n\n                setValue(\"comment\", \"\", { shouldValidate: false });\n\n                // setProfilePosts(posts);\n\n                setSelectedPost({\n                    ...post,\n                    files: post.uploadedRelevantFiles,\n                    index\n                });\n\n                NotificationManager.success(\"Successfully posted your desired comment, we've successfully updated this listing data & notified the owner of these changes!\", \"Successfully posted a new comment!\", 4750);\n\n            } else {\n                console.log(\"Err\", res.data);\n\n                NotificationManager.error(\"An unknown error occurred while attempting to post your desired comment, please try again & if this problem persists, please contact our support team!\", \"Failed to post your desired comment!\", 4750);\n            }\n        }).catch((err) => {\n            console.log(err);\n\n            NotificationManager.error(\"An unknown error occurred while attempting to post your desired comment, please try again & if this problem persists, please contact our support team!\", \"Failed to post your desired comment!\", 4750);\n        })\n    }\n    const renderFormErrors = (errors) => {\n        console.log(\"renderFormErrors\", errors);\n    }\n    console.log(\"selectedPostieeeeeeee\", selectedPost, selectedIndex);\n    return (\n        <Fragment>\n            <Sheet className={\"sheet-single-post-content\"} isOpen={isPostPaneOpen} onClose={() => setPostPaneOpenState(false)}>\n                <Sheet.Container>\n                <Sheet.Header>\n                    <Row>\n                        <Col sm=\"12\" md=\"12\" lg=\"12\" xl=\"12\">\n                            <div className={\"close-btn-spacer\"}>\n                                <Button onClick={() => setPostPaneOpenState(false)} outline className={\"btn-square-danger\"} color={\"danger-2x\"} style={{ width: \"100%\" }}>Close/Exit This Pane Content</Button>\n                            </div>\n                        </Col>\n                    </Row>\n                </Sheet.Header>\n                    <Sheet.Content>\n                        <Container fluid={true}>\n                            <Form onSubmit={handleSubmit(onSubmitForm, (errors) => renderFormErrors(errors))}>\n                                <Row className={\"main-container-post-row\"}>\n                                    <Col sm=\"12\" md=\"12\" lg=\"12\" xl=\"12\">\n                                        <Card className={\"negative-index-card\"}>\n                                            <CardHeader className=\"b-l-primary border-3\">\n                                                <h5>Comment, React & Participate in this post's other comment's & active participants. You can post comments & react to this post and/or comments from this current pane/slider...</h5>\n                                            </CardHeader>\n                                            <CardBody>\n                                                <Card className={\"add-shadow-general-card-profile\"}>\n                                                    <CardBody className={\"sheet-individual-post-body\"}>\n                                                        <Row>\n                                                            <Col sm=\"12\" md=\"5\" lg=\"5\" xl=\"5\">      \n                                                                {renderGridImageOrVideo(selectedPost.files[selectedIndex])}    \n                                                            </Col>\n                                                            <Col sm=\"12\" md=\"7\" lg=\"7\" xl=\"7\">\n                                                                <div className=\"new-users-social\">\n                                                                    <Media>\n                                                                        {renderProfilePicVideoPost(user.profilePicsVideos)}\n                                                                        <Media body>\n                                                                            <h6 className=\"mb-0 f-w-700\">{`${user.firstName} ${user.lastName}`}</h6>\n                                                                            <p>Posted {moment(selectedPost.date).fromNow()}</p>\n                                                                        </Media><span className=\"pull-right mt-0\"><i onClick={() => shiftActiveFileLeft()} className=\"fa fa-caret-square-o-left icon-spacer-right-pane fa-4x\" aria-hidden=\"true\"></i><i onClick={() => shiftActiveFileRight()} className=\"fa fa-caret-square-o-right icon-spacer-right-pane fa-4x\" aria-hidden=\"true\"></i>\n                                                                        {/* <MoreVertical /> */}\n                                                                        </span>\n                                                                    </Media>\n                                                                </div>\n                                                                <div style={{ paddingBottom: \"12.5px\" }} className=\"timeline-content\">\n                                                                    <p className={\"post-title-main\"}>\n                                                                        {selectedPost.title}\n                                                                    </p>\n                                                                </div>\n                                                                <hr />\n                                                                <div className=\"timeline-content\" id={\"override-timeline-content-pane\"}>\n                                                                    <p>\n                                                                        {selectedPost.description}\n                                                                    </p>\n                                                                    <Row id={\"special-popover-row\"}>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.sunglasses}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"sunglasses\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/sunglasses.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.steaming}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"steaming\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/steaming.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.tearsOfJoy}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"tearsOfJoy\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.vomitting}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"vomitting\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/vomitting.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.partying}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"partying\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/partying.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"2\" md=\"1\" lg=\"1\" xl=\"1\">\n                                                                            <h3 className={\"emoji-reaction-count-post\"}>{selectedPost.reactions.screaming}</h3>\n                                                                            <div onClick={() => handleRespondEmoji(\"screaming\")} className={\"emoji-wrapper-course\"}>\n                                                                                <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/screaming.gif\")} />\n                                                                            </div>\n                                                                        </Col>\n                                                                        <Col className={\"course-emoji-col\"} sm=\"12\" md=\"6\" lg=\"6\" xl=\"6\">\n                                                                            <div className=\"like-content custom-like-response-zone\"><span className=\"pull-right comment-number\"><span>{\"20\"} </span><span><i className=\"fa fa-share-alt mr-0\"></i></span></span><span className=\"pull-right comment-number\"><span>{selectedPost.comments.length} </span><span><i className=\"fa fa-comments-o\"></i></span></span></div>\n                                                                        </Col>\n                                                                    </Row>\n                                                                </div>\n                                                            </Col>\n                                                        </Row>\n                                                        <Row>\n                                                            <div className=\"timeline-content\" id={\"override-timeline-content-pane\"}>\n                                                                <div className=\"comments-box\">\n                                                                    <Media>\n                                                                        <Media className=\"img-50 img-fluid m-r-20\" alt=\"\" src={require(\"../../../../../../../assets/gifs/typing-black.gif\")} />\n                                                                        <Media body>\n                                                                            <InputGroup className=\"text-box\">\n                                                                                <Input {...checkMessageMeetsCritera.check(setError, register, clearErrors, \"comment\")} onChange={(e) => {\n\n                                                                                    checkMessageMeetsCritera.onChange(e, \"comment\", setValue);\n\n                                                                                    const caret = e.target.selectionStart;\n                                                                                    const element = e.target;\n                                                                                    window.requestAnimationFrame(() => {\n                                                                                        element.selectionStart = caret\n                                                                                        element.selectionEnd = caret\n                                                                                    })\n                                                                                }} value={currentValues.comment} name={\"comment\"} className={\"form-control input-txt-bx write-comment-post\"} type={\"text\"} placeholder={checkMessageMeetsCritera.placeholder} />\n                                                                                <InputGroupAddon style={{ marginLeft: \"17.5px\" }} addonType=\"append\">\n                                                                                    <Button type={\"submit\"} className={\"btn-square-secondary\"} color={\"secondary\"}>Submit Comment!</Button>\n                                                                                </InputGroupAddon>\n                                                                                <InputGroupAddon addonType=\"append\">\n                                                                                    <i onClick={() => setShowEmojiPicker(!showEmojiPicker)} className=\"fa fa-smile-o fa-3x restyle-emoji-activator-icon\" aria-hidden=\"true\"></i>\n                                                                                    {showEmojiPicker === true ? (\n                                                                                            <Picker style={{ position: \"absolute\", right: \"40px\", top: \"-375px\" }} set=\"apple\" emojiSize={30} onSelect={addEmoji} />\n                                                                                    ) : null}\n                                                                                </InputGroupAddon>\n                                                                            </InputGroup>\n                                                                            {errors.comment ? <span className=\"span-tooltip\">{errors.comment.message}</span> : null}\n                                                                        </Media>\n                                                                    </Media>\n                                                                </div>\n                                                            </div>\n                                                        </Row>\n                                                        <Row>\n                                                            <CommentsIndividualPostReturnCommentsHelper comments={comments} setCommentsState={setCommentsState} data={selectedPost} userData={userData} />\n                                                        </Row>\n                                                    </CardBody>\n                                                </Card>\n                                            </CardBody>\n                                        </Card>\n                                    </Col>\n                                </Row>\n                            </Form>\n                        </Container>\n                    </Sheet.Content>\n                </Sheet.Container>\n                <Sheet.Backdrop />\n            </Sheet>\n        </Fragment>\n    );\n}\nconst mapStateToProps = (state) => {\n    return {\n        userData: state.auth.data\n    }\n}\nexport default connect(mapStateToProps, { })(ViewPostFileContentHelper);"]},"metadata":{},"sourceType":"module"}