{"ast":null,"code":"import { useState, useEffect, useLayoutEffect, useContext, createContext, useRef, useCallback, forwardRef, useImperativeHandle, createElement, Children, cloneElement } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useMotionValue, animate, AnimatePresence, motion, useTransform } from 'framer-motion';\nimport mergeRefs from 'react-merge-refs';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar isSSR = typeof window === 'undefined';\n\nvar getClosest = function getClosest(nums, goal) {\n  return nums.reduce(function (prev, curr) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  });\n};\n\nvar highlightId = 'react-modal-sheet-highlight';\n\nfunction applyRootStyles(rootId) {\n  var body = document.querySelector('body');\n  var root = document.querySelector(\"#\" + rootId);\n\n  if (root) {\n    var p = 24;\n    var h = window.innerHeight;\n    var s = (h - p) / h;\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.willChange = 'transform';\n    root.style.transition = 'transform 200ms linear';\n    root.style.transform = \"translateY(calc(env(safe-area-inset-top) + \" + p / 2 + \"px)) scale(\" + s + \")\"; // prettier-ignore\n\n    root.style.borderTopRightRadius = '10px';\n    root.style.borderTopLeftRadius = '10px'; // Add highlighed overlay to emphasize the modality effect\n\n    var highlight = document.createElement('div');\n    highlight.setAttribute('aria-hidden', 'true');\n    highlight.id = highlightId;\n    highlight.style.position = 'absolute';\n    highlight.style.top = '0px';\n    highlight.style.left = '0px';\n    highlight.style.bottom = '0px';\n    highlight.style.right = '0px';\n    highlight.style.opacity = '0';\n    highlight.style.transition = 'opacity 200ms linear';\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\n    root.appendChild(highlight);\n    requestAnimationFrame(function () {\n      return highlight.style.opacity = '1';\n    });\n  }\n}\n\nfunction cleanupRootStyles(rootId) {\n  var body = document.querySelector('body');\n  var root = document.getElementById(rootId);\n  var highlight = document.getElementById(highlightId);\n\n  function onTransitionEnd() {\n    var _highlight$parentNode;\n\n    root.style.removeProperty('overflow');\n    root.style.removeProperty('will-change');\n    root.style.removeProperty('transition');\n    body.style.removeProperty('background-color');\n    root.removeEventListener('transitionend', onTransitionEnd);\n    (_highlight$parentNode = highlight.parentNode) == null ? void 0 : _highlight$parentNode.removeChild(highlight);\n  }\n\n  if (root && highlight) {\n    // Start animating back\n    root.style.removeProperty('border-top-right-radius');\n    root.style.removeProperty('border-top-left-radius');\n    root.style.removeProperty('transform');\n    highlight.style.opacity = '0'; // Remove temp properties after animation is finished\n\n    root.addEventListener('transitionend', onTransitionEnd);\n  }\n}\n\nvar useIsomorphicLayoutEffect = isSSR ? useEffect : useLayoutEffect;\n\nfunction useWindowHeight() {\n  var _useState = useState(0),\n      windowHeight = _useState[0],\n      setWindowHeight = _useState[1];\n\n  useIsomorphicLayoutEffect(function () {\n    var updateHeight = function updateHeight() {\n      return setWindowHeight(window.innerHeight);\n    };\n\n    window.addEventListener('resize', updateHeight);\n    updateHeight();\n    return function () {\n      return window.removeEventListener('resize', updateHeight);\n    };\n  }, []);\n  return windowHeight;\n}\n\nvar inDescendingOrder = function inDescendingOrder(arr) {\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n\n  return true;\n};\n\nvar SheetContext = /*#__PURE__*/createContext(undefined);\n\nvar useSheetContext = function useSheetContext() {\n  var context = useContext(SheetContext);\n  if (!context) throw Error('Sheet context error');\n  return context;\n};\n\nvar useModalEffect = function useModalEffect(isOpen, rootId) {\n  var prevOpen = usePrevious(isOpen); // Automatically apply the iOS modal effect to the body when sheet opens/closes\n\n  useEffect(function () {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n  // Make sure to cleanup modal styles on unmount\n\n  useEffect(function () {\n    return function () {\n      if (rootId && isOpen) cleanupRootStyles(rootId);\n    };\n  }, [isOpen]); // eslint-disable-line\n};\n\nvar useEventCallbacks = function useEventCallbacks(isOpen, callbacks) {\n  var prevOpen = usePrevious(isOpen);\n  var didOpen = useRef(false); // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n\n  var handleAnimationComplete = useCallback(function () {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd == null ? void 0 : callbacks.current.onOpenEnd();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd == null ? void 0 : callbacks.current.onCloseEnd();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  useEffect(function () {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart == null ? void 0 : callbacks.current.onOpenStart();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart == null ? void 0 : callbacks.current.onCloseStart();\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  return {\n    handleAnimationComplete: handleAnimationComplete\n  };\n};\n\nvar usePrevious = function usePrevious(state) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = state;\n  });\n  return ref.current;\n};\n\nvar styles = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 9999999,\n    overflow: 'hidden',\n    pointerEvents: 'none'\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\n    touchAction: 'none'\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto'\n  },\n  headerWrapper: {\n    width: '100%'\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd'\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    position: 'relative'\n  }\n};\nvar Sheet = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      isOpen = _ref.isOpen,\n      onClose = _ref.onClose,\n      onOpenStart = _ref.onOpenStart,\n      onOpenEnd = _ref.onOpenEnd,\n      onCloseStart = _ref.onCloseStart,\n      onCloseEnd = _ref.onCloseEnd,\n      onSnap = _ref.onSnap,\n      snapPoints = _ref.snapPoints,\n      _ref$initialSnap = _ref.initialSnap,\n      initialSnap = _ref$initialSnap === void 0 ? 0 : _ref$initialSnap,\n      rootId = _ref.rootId,\n      _ref$springConfig = _ref.springConfig,\n      springConfig = _ref$springConfig === void 0 ? {\n    stiffness: 300,\n    damping: 30,\n    mass: 0.2\n  } : _ref$springConfig,\n      _ref$disableDrag = _ref.disableDrag,\n      disableDrag = _ref$disableDrag === void 0 ? false : _ref$disableDrag,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"isOpen\", \"onClose\", \"onOpenStart\", \"onOpenEnd\", \"onCloseStart\", \"onCloseEnd\", \"onSnap\", \"snapPoints\", \"initialSnap\", \"rootId\", \"springConfig\", \"disableDrag\"]);\n\n  var sheetRef = useRef(null);\n  var callbacks = useRef({\n    onOpenStart: onOpenStart,\n    onOpenEnd: onOpenEnd,\n    onCloseStart: onCloseStart,\n    onCloseEnd: onCloseEnd\n  }); // prettier-ignore\n\n  var indicatorRotation = useMotionValue(0);\n  var windowHeight = useWindowHeight();\n  var y = useMotionValue(isOpen ? windowHeight : 0);\n\n  if (snapPoints) {\n    // Convert negative / percentage snap points to absolute values\n    snapPoints = snapPoints.map(function (point) {\n      if (point > 0 && point <= 1) return point * windowHeight; // percentage values e.g. between 0.0 and 1.0\n\n      return point < 0 ? windowHeight + point : point; // negative values\n    });\n    console.assert(inDescendingOrder(snapPoints) || windowHeight === 0, \"Snap points need to be in descending order got: [\" + snapPoints + \"]\");\n  }\n\n  var handleDrag = useCallback(function (_, _ref2) {\n    var delta = _ref2.delta; // Update drag indicator rotation based on drag velocity\n\n    var velocity = y.getVelocity();\n    if (velocity > 0) indicatorRotation.set(10);\n    if (velocity < 0) indicatorRotation.set(-10); // Make sure user cannot drag beyond the top of the sheet\n\n    y.set(Math.max(y.get() + delta.y, 0));\n  }, []); // eslint-disable-line\n\n  var handleDragEnd = useCallback(function (_, _ref3) {\n    var velocity = _ref3.velocity;\n\n    if (velocity.y > 500) {\n      // User flicked the sheet down\n      onClose();\n    } else {\n      var sheetEl = sheetRef.current;\n      var contentHeight = sheetEl.getBoundingClientRect().height;\n      var snapTo = snapPoints ? getClosest(snapPoints.map(function (p) {\n        return contentHeight - p;\n      }), y.get()) // prettier-ignore\n      : y.get() / contentHeight > 0.6 // Close if dragged over 60%\n      ? contentHeight : 0; // Update the spring value so that the sheet is animated to the snap point\n\n      animate(y, snapTo, _extends({\n        type: 'spring'\n      }, springConfig));\n\n      if (snapPoints && onSnap) {\n        var snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n        var snapIndex = snapPoints.indexOf(snapValue);\n        onSnap(snapIndex);\n      }\n\n      if (snapTo >= contentHeight) onClose();\n    } // Reset indicator rotation after dragging\n\n\n    indicatorRotation.set(0);\n  }, [onClose, onSnap] // eslint-disable-line\n  ); // Keep the callback fns up-to-date so that they can be accessed inside\n  // the effect without including them to the dependencies array\n\n  useEffect(function () {\n    callbacks.current = {\n      onOpenStart: onOpenStart,\n      onOpenEnd: onOpenEnd,\n      onCloseStart: onCloseStart,\n      onCloseEnd: onCloseEnd\n    };\n  }); // Trigger onSnap callback when sheet is opened or closed\n\n  useEffect(function () {\n    if (!snapPoints || !onSnap) return;\n    var snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n    onSnap(snapIndex);\n  }, [isOpen]); // eslint-disable-line\n\n  useImperativeHandle(ref, function () {\n    return {\n      snapTo: function snapTo(snapIndex) {\n        if (snapPoints && snapPoints[snapIndex] !== undefined) {\n          var sheetEl = sheetRef.current;\n          var contentHeight = sheetEl.getBoundingClientRect().height;\n          var snapTo = contentHeight - snapPoints[snapIndex];\n          animate(y, snapTo, _extends({\n            type: 'spring'\n          }, springConfig));\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= contentHeight) onClose();\n        }\n      }\n    };\n  });\n  useModalEffect(isOpen, rootId);\n  var dragProps = disableDrag ? {} : {\n    drag: 'y',\n    dragElastic: 0,\n    dragConstraints: {\n      top: 0,\n      bottom: 0\n    },\n    dragMomentum: false,\n    onDrag: handleDrag,\n    onDragEnd: handleDragEnd\n  };\n  var context = {\n    y: y,\n    sheetRef: sheetRef,\n    isOpen: isOpen,\n    initialSnap: initialSnap,\n    snapPoints: snapPoints,\n    indicatorRotation: indicatorRotation,\n    callbacks: callbacks,\n    dragProps: dragProps,\n    windowHeight: windowHeight,\n    springConfig: springConfig\n  };\n\n  var wrapperProps = _extends({}, rest, {\n    ref: ref,\n    style: styles.wrapper\n  });\n\n  var sheet = createElement(SheetContext.Provider, {\n    value: context\n  }, createElement(\"div\", Object.assign({}, wrapperProps), createElement(AnimatePresence, null, isOpen ? Children.map(children, function (child, i) {\n    return cloneElement(child, {\n      key: \"sheet-child-\" + i\n    });\n  }) : null)));\n  if (isSSR) return sheet;\n  return createPortal(sheet, document.body);\n});\nvar MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\nvar SheetContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"style\"]);\n\n  var _useSheetContext = useSheetContext(),\n      y = _useSheetContext.y,\n      isOpen = _useSheetContext.isOpen,\n      callbacks = _useSheetContext.callbacks,\n      snapPoints = _useSheetContext.snapPoints,\n      _useSheetContext$init = _useSheetContext.initialSnap,\n      initialSnap = _useSheetContext$init === void 0 ? 0 : _useSheetContext$init,\n      sheetRef = _useSheetContext.sheetRef,\n      windowHeight = _useSheetContext.windowHeight,\n      springConfig = _useSheetContext.springConfig;\n\n  var _useEventCallbacks = useEventCallbacks(isOpen, callbacks),\n      handleAnimationComplete = _useEventCallbacks.handleAnimationComplete;\n\n  var initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n  var h = snapPoints ? snapPoints[0] : null;\n  var sheetHeight = h ? \"min(\" + h + \"px, \" + MAX_HEIGHT + \")\" : MAX_HEIGHT;\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: mergeRefs([sheetRef, ref]),\n    className: \"react-modal-sheet-container\",\n    style: _extends({}, styles.container, {\n      height: sheetHeight\n    }, style, {\n      y: y\n    }),\n    initial: {\n      y: windowHeight\n    },\n    animate: {\n      y: initialY,\n      transition: _extends({\n        type: 'spring'\n      }, springConfig)\n    },\n    exit: {\n      y: windowHeight\n    },\n    onAnimationComplete: handleAnimationComplete\n  }), children);\n});\nvar SheetContent = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$disableDrag = _ref.disableDrag,\n      disableDrag = _ref$disableDrag === void 0 ? false : _ref$disableDrag,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"disableDrag\", \"style\"]);\n\n  var _useSheetContext = useSheetContext(),\n      dragProps = _useSheetContext.dragProps;\n\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: ref,\n    className: \"react-modal-sheet-content\",\n    style: _extends({}, styles.content, style)\n  }, disableDrag ? {} : dragProps), children);\n});\nvar SheetHeader = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$disableDrag = _ref.disableDrag,\n      disableDrag = _ref$disableDrag === void 0 ? false : _ref$disableDrag,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"disableDrag\", \"style\"]);\n\n  var _useSheetContext = useSheetContext(),\n      indicatorRotation = _useSheetContext.indicatorRotation,\n      dragProps = _useSheetContext.dragProps;\n\n  var indicator1Transform = useTransform(indicatorRotation, function (r) {\n    return \"translateX(2px) rotate(\" + r + \"deg)\";\n  });\n  var indicator2Transform = useTransform(indicatorRotation, function (r) {\n    return \"translateX(-2px) rotate(\" + -1 * r + \"deg)\";\n  });\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: ref,\n    style: _extends({}, styles.headerWrapper, style)\n  }, disableDrag ? {} : dragProps), children || createElement(\"div\", {\n    className: \"react-modal-sheet-header\",\n    style: styles.header\n  }, createElement(motion.span, {\n    className: \"react-modal-sheet-drag-indicator\",\n    style: _extends({}, styles.indicator, {\n      transform: indicator1Transform\n    })\n  }), createElement(motion.span, {\n    className: \"react-modal-sheet-drag-indicator\",\n    style: _extends({}, styles.indicator, {\n      transform: indicator2Transform\n    })\n  })));\n});\n\nvar isClickable = function isClickable(props) {\n  return !!props.onClick || !!props.onTap;\n};\n\nvar SheetBackdrop = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"style\"]);\n\n  var Comp = isClickable(rest) ? motion.button : motion.div;\n  var pointerEvents = isClickable(rest) ? 'auto' : 'none';\n  return createElement(Comp, Object.assign({}, rest, {\n    ref: ref,\n    className: \"react-modal-sheet-backdrop\",\n    style: _extends({}, styles.backdrop, style, {\n      pointerEvents: pointerEvents\n    }),\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    }\n  }));\n});\nvar _Sheet = Sheet;\n_Sheet.Container = SheetContainer;\n_Sheet.Header = SheetHeader;\n_Sheet.Content = SheetContent;\n_Sheet.Backdrop = SheetBackdrop;\nvar SheetCompound = _Sheet;\nexport default SheetCompound;","map":{"version":3,"sources":["../src/utils.ts","../src/context.tsx","../src/hooks.tsx","../src/styles.ts","../src/sheet.tsx","../src/SheetContainer.tsx","../src/SheetContent.tsx","../src/SheetHeader.tsx","../src/SheetBackdrop.tsx","../src/index.tsx"],"names":["isSSR","getClosest","Math","curr","prev","highlightId","applyRootStyles","rootId","body","document","root","p","h","window","s","highlight","requestAnimationFrame","cleanupRootStyles","useIsomorphicLayoutEffect","useWindowHeight","windowHeight","setWindowHeight","useState","updateHeight","inDescendingOrder","i","arr","SheetContext","React","useSheetContext","context","Error","useModalEffect","prevOpen","usePrevious","useEventCallbacks","didOpen","handleAnimationComplete","callbacks","ref","styles","wrapper","position","top","bottom","left","right","zIndex","overflow","pointerEvents","backdrop","width","height","backgroundColor","touchAction","container","borderTopRightRadius","borderTopLeftRadius","boxShadow","display","flexDirection","headerWrapper","header","alignItems","justifyContent","indicator","borderRadius","content","flex","Sheet","children","isOpen","onClose","onOpenStart","onOpenEnd","onCloseStart","onCloseEnd","onSnap","snapPoints","initialSnap","springConfig","stiffness","damping","mass","disableDrag","rest","sheetRef","indicatorRotation","useMotionValue","y","point","console","handleDrag","delta","velocity","handleDragEnd","sheetEl","contentHeight","snapTo","animate","type","snapValue","snapIndex","dragProps","drag","dragElastic","dragConstraints","dragMomentum","onDrag","onDragEnd","wrapperProps","style","sheet","value","key","ReactDOM","MAX_HEIGHT","SheetContainer","initialY","sheetHeight","motion","mergeRefs","className","initial","transition","exit","onAnimationComplete","SheetContent","SheetHeader","indicator1Transform","useTransform","indicator2Transform","transform","isClickable","props","SheetBackdrop","Comp","opacity","_Sheet","SheetCompound"],"mappings":"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","sourcesContent":["import { useEffect, useLayoutEffect, useState } from 'react';\n\nexport const isSSR = typeof window === 'undefined';\n\nexport const getClosest = (nums: number[], goal: number) => {\n  return nums.reduce((prev, curr) => {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  });\n};\n\nconst highlightId = 'react-modal-sheet-highlight';\n\nexport function applyRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n\n  if (root) {\n    const p = 24;\n    const h = window.innerHeight;\n    const s = (h - p) / h;\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.willChange = 'transform';\n    root.style.transition = 'transform 200ms linear';\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`; // prettier-ignore\n    root.style.borderTopRightRadius = '10px';\n    root.style.borderTopLeftRadius = '10px';\n\n    // Add highlighed overlay to emphasize the modality effect\n    const highlight = document.createElement('div');\n    highlight.setAttribute('aria-hidden', 'true');\n    highlight.id = highlightId;\n    highlight.style.position = 'absolute';\n    highlight.style.top = '0px';\n    highlight.style.left = '0px';\n    highlight.style.bottom = '0px';\n    highlight.style.right = '0px';\n    highlight.style.opacity = '0';\n    highlight.style.transition = 'opacity 200ms linear';\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\n\n    root.appendChild(highlight);\n    requestAnimationFrame(() => (highlight.style.opacity = '1'));\n  }\n}\n\nexport function cleanupRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.getElementById(rootId) as HTMLDivElement;\n  const highlight = document.getElementById(highlightId) as HTMLDivElement;\n\n  function onTransitionEnd() {\n    root.style.removeProperty('overflow');\n    root.style.removeProperty('will-change');\n    root.style.removeProperty('transition');\n    body.style.removeProperty('background-color');\n    root.removeEventListener('transitionend', onTransitionEnd);\n    highlight.parentNode?.removeChild(highlight);\n  }\n\n  if (root && highlight) {\n    // Start animating back\n    root.style.removeProperty('border-top-right-radius');\n    root.style.removeProperty('border-top-left-radius');\n    root.style.removeProperty('transform');\n    highlight.style.opacity = '0';\n\n    // Remove temp properties after animation is finished\n    root.addEventListener('transitionend', onTransitionEnd);\n  }\n}\n\nconst useIsomorphicLayoutEffect = isSSR ? useEffect : useLayoutEffect;\n\nexport function useWindowHeight() {\n  const [windowHeight, setWindowHeight] = useState(0);\n\n  useIsomorphicLayoutEffect(() => {\n    const updateHeight = () => setWindowHeight(window.innerHeight);\n    window.addEventListener('resize', updateHeight);\n    updateHeight();\n    return () => window.removeEventListener('resize', updateHeight);\n  }, []);\n\n  return windowHeight;\n}\n\nexport const inDescendingOrder = (arr: number[]) => {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n\n  return true;\n};\n","import * as React from 'react';\nimport { SheetContextType } from './types';\n\nexport const SheetContext = React.createContext<SheetContextType | undefined>(\n  undefined\n);\n\nexport const useSheetContext = () => {\n  const context = React.useContext(SheetContext);\n  if (!context) throw Error('Sheet context error');\n  return context;\n};\n","import * as React from 'react';\n\nimport { SheetEvents } from './types';\nimport { applyRootStyles, cleanupRootStyles } from './utils';\n\nexport const useModalEffect = (isOpen: boolean, rootId?: string) => {\n  const prevOpen = usePrevious(isOpen);\n\n  // Automatically apply the iOS modal effect to the body when sheet opens/closes\n  React.useEffect(() => {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  // Make sure to cleanup modal styles on unmount\n  React.useEffect(() => {\n    return () => {\n      if (rootId && isOpen) cleanupRootStyles(rootId);\n    };\n  }, [isOpen]); // eslint-disable-line\n};\n\nexport const useEventCallbacks = (\n  isOpen: boolean,\n  callbacks: React.MutableRefObject<SheetEvents>\n) => {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = React.useRef(false);\n\n  // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n  const handleAnimationComplete = React.useCallback(() => {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd?.();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd?.();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  React.useEffect(() => {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart?.();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart?.();\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  return { handleAnimationComplete };\n};\n\nconst usePrevious = <T,>(state: T): T | undefined => {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n};\n","import * as CSS from 'csstype';\n\nconst styles: { [key: string]: CSS.Properties } = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 9999999,\n    overflow: 'hidden',\n    pointerEvents: 'none',\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\n    touchAction: 'none', // Disable iOS body scrolling\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto',\n  },\n  headerWrapper: {\n    width: '100%',\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    position: 'relative',\n  },\n};\n\nexport default styles;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport {\n  animate,\n  useMotionValue,\n  PanInfo,\n  AnimatePresence,\n} from 'framer-motion';\n\nimport { SheetContextType, SheetProps } from './types';\nimport { getClosest, inDescendingOrder, isSSR, useWindowHeight } from './utils';\nimport { SheetContext } from './context';\nimport { useModalEffect } from './hooks';\nimport styles from './styles';\n\nconst Sheet = React.forwardRef<any, SheetProps>(\n  (\n    {\n      children,\n      isOpen,\n      onClose,\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd,\n      onSnap,\n      snapPoints,\n      initialSnap = 0,\n      rootId,\n      springConfig = { stiffness: 300, damping: 30, mass: 0.2 },\n      disableDrag = false,\n      ...rest\n    },\n    ref\n  ) => {\n    const sheetRef = React.useRef<any>(null);\n    const callbacks = React.useRef({ onOpenStart, onOpenEnd, onCloseStart, onCloseEnd }); // prettier-ignore\n    const indicatorRotation = useMotionValue(0);\n    const windowHeight = useWindowHeight();\n    const y = useMotionValue(isOpen ? windowHeight : 0);\n\n    if (snapPoints) {\n      // Convert negative / percentage snap points to absolute values\n      snapPoints = snapPoints.map(point => {\n        if (point > 0 && point <= 1) return point * windowHeight; // percentage values e.g. between 0.0 and 1.0\n        return point < 0 ? windowHeight + point : point; // negative values\n      });\n\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints}]`\n      );\n    }\n\n    const handleDrag = React.useCallback((_, { delta }: PanInfo) => {\n      // Update drag indicator rotation based on drag velocity\n      const velocity = y.getVelocity();\n      if (velocity > 0) indicatorRotation.set(10);\n      if (velocity < 0) indicatorRotation.set(-10);\n\n      // Make sure user cannot drag beyond the top of the sheet\n      y.set(Math.max(y.get() + delta.y, 0));\n    }, []); // eslint-disable-line\n\n    const handleDragEnd = React.useCallback(\n      (_, { velocity }: PanInfo) => {\n        if (velocity.y > 500) {\n          // User flicked the sheet down\n          onClose();\n        } else {\n          const sheetEl = sheetRef.current as HTMLDivElement;\n          const contentHeight = sheetEl.getBoundingClientRect().height;\n          const snapTo = snapPoints\n            ? getClosest(snapPoints.map(p => contentHeight - p), y.get()) // prettier-ignore\n            : y.get() / contentHeight > 0.6 // Close if dragged over 60%\n            ? contentHeight\n            : 0;\n\n          // Update the spring value so that the sheet is animated to the snap point\n          animate(y, snapTo, { type: 'spring', ...springConfig });\n\n          if (snapPoints && onSnap) {\n            const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n            const snapIndex = snapPoints.indexOf(snapValue);\n            onSnap(snapIndex);\n          }\n\n          if (snapTo >= contentHeight) onClose();\n        }\n\n        // Reset indicator rotation after dragging\n        indicatorRotation.set(0);\n      },\n      [onClose, onSnap] // eslint-disable-line\n    );\n\n    // Keep the callback fns up-to-date so that they can be accessed inside\n    // the effect without including them to the dependencies array\n    React.useEffect(() => {\n      callbacks.current = { onOpenStart, onOpenEnd, onCloseStart, onCloseEnd };\n    });\n\n    // Trigger onSnap callback when sheet is opened or closed\n    React.useEffect(() => {\n      if (!snapPoints || !onSnap) return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]); // eslint-disable-line\n\n    React.useImperativeHandle(ref, () => ({\n      snapTo: (snapIndex: number) => {\n        if (snapPoints && snapPoints[snapIndex] !== undefined) {\n          const sheetEl = sheetRef.current as HTMLDivElement;\n          const contentHeight = sheetEl.getBoundingClientRect().height;\n          const snapTo = contentHeight - snapPoints[snapIndex];\n\n          animate(y, snapTo, { type: 'spring', ...springConfig });\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= contentHeight) onClose();\n        }\n      },\n    }));\n\n    useModalEffect(isOpen, rootId);\n\n    const dragProps = disableDrag\n      ? ({} as any)\n      : {\n          drag: 'y' as const,\n          dragElastic: 0,\n          dragConstraints: { top: 0, bottom: 0 },\n          dragMomentum: false,\n          onDrag: handleDrag,\n          onDragEnd: handleDragEnd,\n        };\n\n    const context: SheetContextType = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      springConfig,\n    };\n\n    const wrapperProps = {\n      ...rest,\n      ref,\n      style: styles.wrapper,\n    };\n\n    const sheet = (\n      <SheetContext.Provider value={context}>\n        <div {...wrapperProps}>\n          <AnimatePresence>\n            {/* NOTE: AnimatePresence requires us to set keys to children */}\n            {isOpen\n              ? React.Children.map(children, (child: any, i) =>\n                  React.cloneElement(child, { key: `sheet-child-${i}` })\n                )\n              : null}\n          </AnimatePresence>\n        </div>\n      </SheetContext.Provider>\n    );\n\n    if (isSSR) return sheet;\n\n    return ReactDOM.createPortal(sheet, document.body);\n  }\n);\n\nexport default Sheet;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\nimport mergeRefs from 'react-merge-refs';\n\nimport { SheetContainerProps } from './types';\nimport { useSheetContext } from './context';\nimport { useEventCallbacks } from './hooks';\nimport styles from './styles';\n\nconst MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\n\nconst SheetContainer = React.forwardRef<any, SheetContainerProps>(\n  ({ children, style = {}, ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      springConfig,\n    } = useSheetContext();\n\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const h = snapPoints ? snapPoints[0] : null;\n    const sheetHeight = h ? `min(${h}px, ${MAX_HEIGHT})` : MAX_HEIGHT;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([sheetRef, ref])}\n        className=\"react-modal-sheet-container\"\n        style={{ ...styles.container, height: sheetHeight, ...style, y }}\n        initial={{ y: windowHeight }}\n        animate={{\n          y: initialY,\n          transition: { type: 'spring', ...springConfig },\n        }}\n        exit={{ y: windowHeight }}\n        onAnimationComplete={handleAnimationComplete}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContainer;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport styles from './styles';\nimport { useSheetContext } from './context';\n\nconst SheetContent = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\n    const { dragProps } = useSheetContext();\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        className=\"react-modal-sheet-content\"\n        style={{ ...styles.content, ...style }}\n        {...(disableDrag ? {} : dragProps)}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContent;\n","import * as React from 'react';\nimport { motion, useTransform } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport styles from './styles';\n\nconst SheetHeader = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(2px) rotate(${r}deg)`\n    );\n\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        style={{ ...styles.headerWrapper, ...style }}\n        {...(disableDrag ? {} : dragProps)}\n      >\n        {children || (\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator1Transform }}\n            />\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator2Transform }}\n            />\n          </div>\n        )}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetHeader;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetBackdropProps } from './types';\nimport styles from './styles';\n\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\n\nconst SheetBackdrop = React.forwardRef<any, SheetBackdropProps>(\n  ({ style = {}, ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? 'auto' : 'none';\n\n    return (\n      <Comp\n        {...rest}\n        ref={ref}\n        className=\"react-modal-sheet-backdrop\"\n        style={{ ...styles.backdrop, ...style, pointerEvents }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      />\n    );\n  }\n);\n\nexport default SheetBackdrop;\n","import Sheet from './sheet';\nimport SheetContainer from './SheetContainer';\nimport SheetContent from './SheetContent';\nimport SheetHeader from './SheetHeader';\nimport SheetBackdrop from './SheetBackdrop';\n\nexport type SheetRef = {\n  snapTo: (index: number) => void;\n};\n\ntype SheetCompoundComponent = {\n  Container: typeof SheetContainer;\n  Header: typeof SheetHeader;\n  Content: typeof SheetContent;\n  Backdrop: typeof SheetBackdrop;\n};\n\n// HACK: this is needed to get the typing to work properly...\nconst _Sheet: any = Sheet;\n_Sheet.Container = SheetContainer;\n_Sheet.Header = SheetHeader;\n_Sheet.Content = SheetContent;\n_Sheet.Backdrop = SheetBackdrop;\n\nconst SheetCompound: typeof Sheet & SheetCompoundComponent = _Sheet;\n\nexport default SheetCompound;\n"]},"metadata":{},"sourceType":"module"}