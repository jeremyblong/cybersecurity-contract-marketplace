{"ast":null,"code":"import React,{Fragment,useState,useEffect}from\"react\";import ReactPlayer from\"react-player\";import{Media,Container,Row,Col,Input,CardFooter,Card,CardBody,Form,CardHeader,FormGroup,Label,Button,Popover,PopoverBody,PopoverHeader}from\"reactstrap\";import _ from\"lodash\";import axios from\"axios\";import\"./styles.css\";import{NotificationManager}from\"react-notifications\";import Sheet from'react-modal-sheet';import reduxFormHelpers from\"./reduxForumHelpers/formHelpers.js\";import{useForm,Controller}from'react-hook-form';import{WithContext as ReactTags}from'react-tag-input';import uuid from\"react-uuid\";const KeyCodes={comma:188,enter:[10,13]};const itemsPerPage=10;const delimiters=[...KeyCodes.enter,KeyCodes.comma];const replySubcommentChecks=reduxFormHelpers().replySubcommentChecks;const RenderPopoverEmojiLogic=_ref=>{let{reactions,targetAndPopState,setPopoverState,popoverState,handleRespondEmoji,comment}=_ref;const[stateCount,setStateCount]=useState(0);const[ready,setReady]=useState(false);useEffect(()=>{let count=0;// loop over reactions\nfor(const key in reactions){const reactionOutcome=reactions[key];// check if emoji is already added - if not... add it!\nif(reactionOutcome>0){count++;}}setStateCount(count);setReady(true);},[]);const renderMainContentPopover=()=>{const closePopover=targetAndPopState=>{setPopoverState(prevState=>{return{...prevState,[targetAndPopState]:false};});};if(ready===true){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Popover,{placement:\"bottom\",isOpen:popoverState[targetAndPopState],target:targetAndPopState,toggle:()=>{closePopover(targetAndPopState);}},/*#__PURE__*/React.createElement(PopoverHeader,null,\"Current Comment Reaction's (\",stateCount,\" total reaction type's)\"),/*#__PURE__*/React.createElement(PopoverBody,null,/*#__PURE__*/React.createElement(\"div\",{onMouseLeave:()=>{closePopover(targetAndPopState);},className:\"mouse-exit-close-popover-emojis\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"sunglasses\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/sunglasses.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"steaming\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/steaming.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"tearsOfJoy\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"vomitting\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/vomitting.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"partying\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/partying.gif\")}))),/*#__PURE__*/React.createElement(Col,{className:\"course-emoji-col\",sm:\"2\",md:\"2\",lg:\"2\",xl:\"2\"},/*#__PURE__*/React.createElement(\"div\",{onClick:()=>handleRespondEmoji(\"screaming\",comment,closePopover,targetAndPopState),className:\"emoji-wrapper-course\"},/*#__PURE__*/React.createElement(\"img\",{className:\"custom-course-emoji-render\",src:require(\"../../../../../../../assets/gifs/screaming.gif\")}))))))));}else{return null;}};return/*#__PURE__*/React.createElement(Fragment,null,renderMainContentPopover());};const renderSignedinUserPicVideo=file=>{if(file!==null&&_.has(file,\"link\")){if(file.type.includes(\"video\")){// video logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"forum-video-wrapper-signedin\"},/*#__PURE__*/React.createElement(ReactPlayer,{playing:true,loop:true,muted:true,width:\"100%\",className:\"media-body img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\",wrapper:\"div\",url:\"\".concat(process.env.REACT_APP_ASSET_LINK,\"/\").concat(file.link)}));}else{// image logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\",body:true,alt:\"profile-picture-sub\",src:\"\".concat(process.env.REACT_APP_ASSET_LINK,\"/\").concat(file.link),\"data-intro\":\"This is Profile image\"});}}else{// image logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\",body:true,alt:\"profile-picture-sub\",src:process.env.REACT_APP_PLACEHOLDER_IMAGE,\"data-intro\":\"This is Profile image\"});}};const renderPicVideoComment=file=>{if(file!==null&&_.has(file,\"link\")){if(file.type.includes(\"video\")){// video logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"forum-video-wrapper-signedin\"},/*#__PURE__*/React.createElement(ReactPlayer,{playing:true,loop:true,muted:true,width:\"100%\",className:\"media-body img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\",wrapper:\"div\",url:\"\".concat(process.env.REACT_APP_ASSET_LINK,\"/\").concat(file.link)}));}else{// image logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\",body:true,alt:\"profile-picture-sub\",src:\"\".concat(process.env.REACT_APP_ASSET_LINK,\"/\").concat(file.link),\"data-intro\":\"This is Profile image\"});}}else{// image logic\nreturn/*#__PURE__*/React.createElement(Media,{className:\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\",body:true,alt:\"profile-picture-sub\",src:process.env.REACT_APP_PLACEHOLDER_IMAGE,\"data-intro\":\"This is Profile image\"});};};const addNewComment=(commentText,setCommentText,subthreadID,setComments,poster,userData,hashtags,setHashtags)=>{const configuration={subthreadID:subthreadID,commentText,subthreadPosterID:poster,signedinUserID:userData.uniqueId,signedinAccountType:userData.accountType,hashtags};axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/post/new/comment/forums/subthread/subcomment\"),configuration).then(res=>{if(res.data.message===\"Successfully posted a new comment on subthread!\"){console.log(res.data);const{comments}=res.data;setComments(comments);setCommentText(\"\");setHashtags([]);NotificationManager.success(\"We've successfully updated this forum post and added your comment & it is now live/public! Check back often to see any breaking changes or check your notifications!\",\"Successfully posted your comment!\",4750);}else{console.log(\"errr inside...:\",res.data);NotificationManager.error(\"An unknown error occurred while attempting to post your new comment, contact support if this problem persists or try commenting again...\",\"Unknown error occurred while trying to post new comment!\",4750);}}).catch(err=>{console.log(err);NotificationManager.error(\"An unknown error occurred while attempting to post your new comment, contact support if this problem persists or try commenting again...\",\"Unknown error occurred while trying to post new comment!\",4750);});};const ForumCommentAddHashtagsOptionHelper=_ref2=>{let{setHashtags,hashtags}=_ref2;// state initialization\nconst suggestions=useState([]);const handleDelete=i=>{setHashtags(hashtags.filter((tag,index)=>index!==i));};const handleAddition=tag=>{setHashtags(prevState=>{return[...prevState,tag];});};const handleDrag=(tag,currPos,newPos)=>{const tags=[...hashtags];const newTags=tags.slice();newTags.splice(currPos,1);newTags.splice(newPos,0,tag);setHashtags(newTags);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Label,{className:\"heavy-forum-label\"},\"(OPTIONAL) Add hashtag's to your comment to emphisize certain subject's or points of focus\"),/*#__PURE__*/React.createElement(ReactTags,{autofocus:false,tags:hashtags,classNames:{tags:'tagsClass',tagInput:'tagInputClass',tagInputField:'form-control',selected:'selectedClass',tag:'badge badge-primary custom-tag-streaming',remove:'removeClass',suggestions:'suggestionsClass',activeSuggestion:'activeSuggestionClass'},placeholder:\"(OPTIONAL) Add hashtags to your comment...\",maxLength:10// suggestions={suggestions}\n,handleDelete:handleDelete,handleAddition:handleAddition,handleDrag:handleDrag,delimiters:delimiters}));};const RenderModalSheetAddComment=_ref3=>{let{id,poster,itemOffset,setComments,setPermenantDataState,isOpen,selectedComment,setSelectedComment,setOpenState,userData}=_ref3;const[hashtags,setHashtags]=useState([]);const{register,handleSubmit,control,reset,getValues,setValue,setError,clearErrors,formState:{errors}}=useForm({mode:\"onTouched\",reValidateMode:\"onBlur\"});const onSubmit=data=>{console.log(\"onSubmit submitted form data...\",data);const subcomment=data.subcomment;const configuration={subcomment,signedinUserID:userData.uniqueId,selectedCommentID:selectedComment.id,signedinAccountType:userData.accountType,hashtags,subthreadPosterID:poster,subthreadID:id};axios.post(\"\".concat(process.env.REACT_APP_BASE_URL,\"/post/subcomment/comment/forum/listing\"),configuration).then(res=>{if(res.data.message===\"Successfully posted a new comment on subthread!\"){console.log(res.data);const{comments}=res.data;const endOffset=itemOffset+itemsPerPage;setPermenantDataState(comments);setComments(comments.slice(itemOffset,endOffset));setOpenState(false);}else{console.log(\"errr inside...:\",res.data);}}).catch(err=>{console.log(err);});};const errorsSubmit=(e,errors)=>{console.log(\"errors occurred while attempting to submit\",e,errors);};const resetFormAndClose=()=>{console.log(\"resetFormAndClose close and reset...\");reset({subcomment:\"\"});setHashtags([]);setOpenState(false);};// get form-redux values\nconst currentValues=getValues();return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Sheet,{isOpen:isOpen,onClose:()=>setOpenState(false)},/*#__PURE__*/React.createElement(Sheet.Container,null,/*#__PURE__*/React.createElement(Sheet.Header,null),/*#__PURE__*/React.createElement(Sheet.Content,null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Col,{sm:\"12\",md:\"12\",lg:\"12\",xl:\"12\"},/*#__PURE__*/React.createElement(Card,{className:\"shadowy-card-forum-comment\",style:{marginTop:\"25px\"}},/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",null,\"Post A New Comment Response\")),/*#__PURE__*/React.createElement(Form,{className:\"form theme-form\",onSubmit:handleSubmit(onSubmit,(e,errors)=>{return errorsSubmit(e,errors);})},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(ForumCommentAddHashtagsOptionHelper,{hashtags:hashtags,setHashtags:setHashtags})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{htmlFor:\"exampleFormControlSelect3\"},replySubcommentChecks.label),/*#__PURE__*/React.createElement(Input,Object.assign({},replySubcommentChecks.check(setError,register),{placeholder:replySubcommentChecks.placeholder,onChange:e=>replySubcommentChecks.onChange(e.target.value,setValue,clearErrors),value:currentValues.subcomment,type:replySubcommentChecks.type,className:\"form-control\",rows:\"5\"})),errors.subcomment?/*#__PURE__*/React.createElement(\"span\",{className:\"span-tooltip\"},errors.subcomment.message):null)))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(Button,{style:{width:\"49.5%\"},color:\"primary\",type:\"submit\",className:\"mr-1\"},\"Submit Comment\"),/*#__PURE__*/React.createElement(Button,{style:{width:\"49.5%\"},color:\"light\",onClick:resetFormAndClose},\"Cancel/Close\")))))))),/*#__PURE__*/React.createElement(Sheet.Backdrop,null)));};const RenderEmojiLogic=_ref4=>{let{setReactionCount,reactions,comments}=_ref4;const[emojiData,emojiArrayResponded]=useState([]);const[ready,setReady]=useState(false);useEffect(()=>{const customEmojiArr=[];let count=0;for(const key in reactions){const element=reactions[key];count+=element;if(element>0){customEmojiArr.push(key);}}setReactionCount(count);emojiArrayResponded(customEmojiArr);setReady(true);},[]);console.log(\"emojiData inner component ./:\",emojiData);useEffect(()=>{console.log(\"emojiData update or unmount\",reactions,comments);const customEmojiArr=[];for(const key in reactions){const element=reactions[key];if(element>0){customEmojiArr.push(key);}}console.log(\"customEmojiArr POSSIBLE Problem --- :\",customEmojiArr);emojiArrayResponded(customEmojiArr);},[reactions]);return/*#__PURE__*/React.createElement(\"ul\",{className:\"product-color m-t-15\"},emojiData.map((reaction,index)=>{console.log(\"re-render reaction...\",reaction);switch(reaction){case\"partying\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/partying.gif\")}));break;case\"screaming\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/screaming.gif\")}));break;case\"steaming\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/steaming.gif\")}));break;case\"sunglasses\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/sunglasses.gif\")}));break;case\"tearsOfJoy\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")}));break;case\"vomitting\":return/*#__PURE__*/React.createElement(\"li\",{key:reaction+index,className:\"bg-dark emoji-container-forum-react\"},/*#__PURE__*/React.createElement(\"img\",{className:\"gif-reaction\",src:require(\"../../../../../../../assets/gifs/vomitting.gif\")}));break;default:return null;break;}}));};export default{renderSignedinUserPicVideo,addNewComment,renderPicVideoComment,RenderModalSheetAddComment,ForumCommentAddHashtagsOptionHelper,RenderEmojiLogic,RenderPopoverEmojiLogic};","map":{"version":3,"sources":["/home/kali/Documents/cybersecurity-bounty-hunting-platform/client/src/components/dashboard/forums/individualForum/helpers/bottomTabbed/helpers/helperFunctions.js"],"names":["React","Fragment","useState","useEffect","ReactPlayer","Media","Container","Row","Col","Input","CardFooter","Card","CardBody","Form","CardHeader","FormGroup","Label","Button","Popover","PopoverBody","PopoverHeader","_","axios","NotificationManager","Sheet","reduxFormHelpers","useForm","Controller","WithContext","ReactTags","uuid","KeyCodes","comma","enter","itemsPerPage","delimiters","replySubcommentChecks","RenderPopoverEmojiLogic","reactions","targetAndPopState","setPopoverState","popoverState","handleRespondEmoji","comment","stateCount","setStateCount","ready","setReady","count","key","reactionOutcome","renderMainContentPopover","closePopover","prevState","require","renderSignedinUserPicVideo","file","has","type","includes","process","env","REACT_APP_ASSET_LINK","link","REACT_APP_PLACEHOLDER_IMAGE","renderPicVideoComment","addNewComment","commentText","setCommentText","subthreadID","setComments","poster","userData","hashtags","setHashtags","configuration","subthreadPosterID","signedinUserID","uniqueId","signedinAccountType","accountType","post","REACT_APP_BASE_URL","then","res","data","message","console","log","comments","success","error","catch","err","ForumCommentAddHashtagsOptionHelper","suggestions","handleDelete","i","filter","tag","index","handleAddition","handleDrag","currPos","newPos","tags","newTags","slice","splice","tagInput","tagInputField","selected","remove","activeSuggestion","RenderModalSheetAddComment","id","itemOffset","setPermenantDataState","isOpen","selectedComment","setSelectedComment","setOpenState","register","handleSubmit","control","reset","getValues","setValue","setError","clearErrors","formState","errors","mode","reValidateMode","onSubmit","subcomment","selectedCommentID","endOffset","errorsSubmit","e","resetFormAndClose","currentValues","marginTop","label","check","placeholder","onChange","target","value","width","RenderEmojiLogic","setReactionCount","emojiData","emojiArrayResponded","customEmojiArr","element","push","map","reaction"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport ReactPlayer from \"react-player\";\nimport { Media, Container, Row, Col, Input, CardFooter, Card, CardBody, Form, CardHeader, FormGroup, Label, Button, Popover, PopoverBody, PopoverHeader } from \"reactstrap\";\nimport _ from \"lodash\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport { NotificationManager } from \"react-notifications\";\nimport Sheet from 'react-modal-sheet';\nimport reduxFormHelpers from \"./reduxForumHelpers/formHelpers.js\";\nimport { useForm, Controller } from 'react-hook-form';\nimport { WithContext as ReactTags } from 'react-tag-input';\nimport uuid from \"react-uuid\";\n\nconst KeyCodes = {\n    comma: 188,\n    enter: [10, 13],\n};\n\nconst itemsPerPage = 10;\n  \nconst delimiters = [...KeyCodes.enter, KeyCodes.comma];\n\n\nconst replySubcommentChecks = reduxFormHelpers().replySubcommentChecks;\n\n\n\nconst RenderPopoverEmojiLogic = ({ reactions, targetAndPopState, setPopoverState, popoverState, handleRespondEmoji, comment }) => {\n    const [stateCount, setStateCount] = useState(0);\n    const [ready, setReady] = useState(false);\n\n    useEffect(() => {\n        let count = 0;\n        // loop over reactions\n        for (const key in reactions) {\n            const reactionOutcome = reactions[key];\n\n            // check if emoji is already added - if not... add it!\n            if (reactionOutcome > 0) {\n                count++;\n            }\n        }\n        setStateCount(count);\n        setReady(true);\n    }, []);\n\n    const renderMainContentPopover = () => {\n        const closePopover = (targetAndPopState) => {\n            setPopoverState(prevState => {\n                return {\n                    ...prevState,\n                    [targetAndPopState]: false\n                }\n            });\n        }\n        if (ready === true) {\n            return (\n                <Fragment>\n                    <Popover placement=\"bottom\" isOpen={popoverState[targetAndPopState]} target={targetAndPopState} toggle={() => {\n                        closePopover(targetAndPopState);\n                    }}>\n                        <PopoverHeader>Current Comment Reaction's ({stateCount} total reaction type's)</PopoverHeader>\n                        <PopoverBody>\n                            <div onMouseLeave={() => {\n                                closePopover(targetAndPopState);\n                            }} className={\"mouse-exit-close-popover-emojis\"}>\n                                <Row>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"sunglasses\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/sunglasses.gif\")} />\n                                        </div>\n                                    </Col>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"steaming\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/steaming.gif\")} />\n                                        </div>\n                                    </Col>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"tearsOfJoy\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")} />\n                                        </div>\n                                    </Col>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"vomitting\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/vomitting.gif\")} />\n                                        </div>\n                                    </Col>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"partying\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/partying.gif\")} />\n                                        </div>\n                                    </Col>\n                                    <Col className={\"course-emoji-col\"} sm=\"2\" md=\"2\" lg=\"2\" xl=\"2\">\n                                        <div onClick={() => handleRespondEmoji(\"screaming\", comment, closePopover, targetAndPopState)} className={\"emoji-wrapper-course\"}>\n                                            <img className={\"custom-course-emoji-render\"} src={require(\"../../../../../../../assets/gifs/screaming.gif\")} />\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </div>\n                        </PopoverBody>\n                    </Popover>\n                </Fragment>\n            );\n        } else {\n            return null;\n        }\n    }\n    return (\n        <Fragment>\n            {renderMainContentPopover()}\n        </Fragment>\n    );\n}\nconst renderSignedinUserPicVideo = (file) => {\n    if (file !== null && _.has(file, \"link\")) {\n        if (file.type.includes(\"video\")) {\n            // video logic\n            return (\n                <Media className=\"forum-video-wrapper-signedin\">\n                    <ReactPlayer playing={true} loop={true} muted={true} width={\"100%\"} className={\"media-body img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\"} wrapper={\"div\"} url={`${process.env.REACT_APP_ASSET_LINK}/${file.link}`} />\n                </Media>\n            );\n        } else {\n            // image logic\n            return <Media className=\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\" body alt=\"profile-picture-sub\" src={`${process.env.REACT_APP_ASSET_LINK}/${file.link}`} data-intro=\"This is Profile image\" />;\n        }    \n    } else {\n        // image logic\n        return <Media className=\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum\" body alt=\"profile-picture-sub\" src={process.env.REACT_APP_PLACEHOLDER_IMAGE} data-intro=\"This is Profile image\" />;\n    } \n}\nconst renderPicVideoComment = (file) => {\n    if (file !== null && _.has(file, \"link\")) {\n        if (file.type.includes(\"video\")) {\n            // video logic\n            return (\n                <Media className=\"forum-video-wrapper-signedin\">\n                    <ReactPlayer playing={true} loop={true} muted={true} width={\"100%\"} className={\"media-body img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\"} wrapper={\"div\"} url={`${process.env.REACT_APP_ASSET_LINK}/${file.link}`} />\n                </Media>\n            );\n        } else {\n            // image logic\n            return <Media className=\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\" body alt=\"profile-picture-sub\" src={`${process.env.REACT_APP_ASSET_LINK}/${file.link}`} data-intro=\"This is Profile image\" />;\n        }    \n    } else {\n        // image logic\n        return <Media className=\"img-50 img-fluid m-r-20 rounded-circle force-rounded-file-forum-second\" body alt=\"profile-picture-sub\" src={process.env.REACT_APP_PLACEHOLDER_IMAGE} data-intro=\"This is Profile image\" />;\n    };\n}\nconst addNewComment = (commentText, setCommentText, subthreadID, setComments, poster, userData, hashtags, setHashtags) => {\n    const configuration = {\n        subthreadID: subthreadID, \n        commentText,\n        subthreadPosterID: poster,\n        signedinUserID: userData.uniqueId,\n        signedinAccountType: userData.accountType,\n        hashtags\n    }\n    axios.post(`${process.env.REACT_APP_BASE_URL}/post/new/comment/forums/subthread/subcomment`, configuration).then((res) => {\n        if (res.data.message === \"Successfully posted a new comment on subthread!\") {\n            console.log(res.data);\n\n            const { comments } = res.data;\n\n            setComments(comments);\n            setCommentText(\"\");\n            setHashtags([]);\n\n            NotificationManager.success(\"We've successfully updated this forum post and added your comment & it is now live/public! Check back often to see any breaking changes or check your notifications!\", \"Successfully posted your comment!\", 4750);\n        } else {\n            console.log(\"errr inside...:\", res.data);\n\n            NotificationManager.error(\"An unknown error occurred while attempting to post your new comment, contact support if this problem persists or try commenting again...\", \"Unknown error occurred while trying to post new comment!\", 4750);\n        }\n    }).catch((err) => {\n        console.log(err);\n\n        NotificationManager.error(\"An unknown error occurred while attempting to post your new comment, contact support if this problem persists or try commenting again...\", \"Unknown error occurred while trying to post new comment!\", 4750);\n    })\n}\nconst ForumCommentAddHashtagsOptionHelper = ({ setHashtags, hashtags }) => {\n    // state initialization\n    const suggestions = useState([])\n\n    const handleDelete = (i) => {\n        setHashtags(hashtags.filter((tag, index) => index !== i));\n    }\n    const handleAddition = (tag) => {\n\n        setHashtags(prevState => {\n            return [...prevState, tag]\n        })\n    }\n\n    const handleDrag = (tag, currPos, newPos) => {\n        const tags = [...hashtags];\n        const newTags = tags.slice();\n\n        newTags.splice(currPos, 1);\n        newTags.splice(newPos, 0, tag);\n\n        setHashtags(newTags);\n    }\n    return (\n        <div>\n            <Label className=\"heavy-forum-label\">{\"(OPTIONAL) Add hashtag's to your comment to emphisize certain subject's or points of focus\"}</Label>\n            <ReactTags \n                autofocus={false}\n                tags={hashtags}\n                classNames={{\n                    tags: 'tagsClass',\n                    tagInput: 'tagInputClass',\n                    tagInputField: 'form-control',\n                    selected: 'selectedClass',\n                    tag: 'badge badge-primary custom-tag-streaming',\n                    remove: 'removeClass',\n                    suggestions: 'suggestionsClass',\n                    activeSuggestion: 'activeSuggestionClass'\n                }}\n                placeholder={\"(OPTIONAL) Add hashtags to your comment...\"}\n                maxLength={10}\n                // suggestions={suggestions}\n                handleDelete={handleDelete}\n                handleAddition={handleAddition}\n                handleDrag={handleDrag}\n                delimiters={delimiters} \n            />\n        </div>\n    );\n};\nconst RenderModalSheetAddComment = ({ id, poster, itemOffset, setComments, setPermenantDataState, isOpen, selectedComment, setSelectedComment, setOpenState, userData }) => {\n\n    const [ hashtags, setHashtags ] = useState([]);\n\n    const { register, handleSubmit, control, reset, getValues, setValue, setError, clearErrors, formState: { errors }} = useForm({\n        mode: \"onTouched\",\n        reValidateMode: \"onBlur\"\n    });\n\n    const onSubmit = (data) => {\n        console.log(\"onSubmit submitted form data...\", data);\n\n        const subcomment = data.subcomment;\n\n        const configuration = {\n            subcomment,\n            signedinUserID: userData.uniqueId,\n            selectedCommentID: selectedComment.id,\n            signedinAccountType: userData.accountType,\n            hashtags,\n            subthreadPosterID: poster,\n            subthreadID: id\n        }\n        axios.post(`${process.env.REACT_APP_BASE_URL}/post/subcomment/comment/forum/listing`, configuration).then((res) => {\n            if (res.data.message === \"Successfully posted a new comment on subthread!\") {\n                console.log(res.data);\n\n                const { comments } = res.data;\n\n                const endOffset = itemOffset + itemsPerPage;\n\n                setPermenantDataState(comments);\n                setComments(comments.slice(itemOffset, endOffset));\n                setOpenState(false);\n            } else {\n                console.log(\"errr inside...:\", res.data);\n            }\n        }).catch((err) => {\n            console.log(err);\n        })\n    }\n\n    const errorsSubmit = (e, errors) => {\n        console.log(\"errors occurred while attempting to submit\", e, errors);\n    }\n\n    const resetFormAndClose = () => {\n        console.log(\"resetFormAndClose close and reset...\");\n        \n        reset({\n            subcomment: \"\"\n        })\n        setHashtags([]);\n\n        setOpenState(false);\n    }\n\n    // get form-redux values\n    const currentValues = getValues();\n\n    return (\n        <Fragment>\n            <Sheet isOpen={isOpen} onClose={() => setOpenState(false)}>\n                <Sheet.Container>\n                <Sheet.Header />\n                <Sheet.Content>\n                    <Container fluid={true}>\n                        <Col sm=\"12\" md=\"12\" lg=\"12\" xl=\"12\">\n                            <Card className=\"shadowy-card-forum-comment\" style={{ marginTop: \"25px\" }}>\n                                <CardHeader>\n                                    <h5>Post A New Comment Response</h5>\n                                </CardHeader>\n                                <Form className=\"form theme-form\" onSubmit={handleSubmit(onSubmit, (e, errors) => {\n                                    return errorsSubmit(e, errors);\n                                })}>\n                                    <CardBody>\n                                        <Row>\n                                            <Col>\n                                                <FormGroup>\n                                                    <ForumCommentAddHashtagsOptionHelper hashtags={hashtags} setHashtags={setHashtags} />\n                                                </FormGroup>\n                                            </Col>\n                                        </Row>\n                                        <Row>\n                                            <Col>\n                                                <FormGroup>\n                                                    <Label htmlFor=\"exampleFormControlSelect3\">{replySubcommentChecks.label}</Label>\n                                                    <Input {...replySubcommentChecks.check(setError, register)} placeholder={replySubcommentChecks.placeholder} onChange={(e) => replySubcommentChecks.onChange(e.target.value, setValue, clearErrors)} value={currentValues.subcomment} type={replySubcommentChecks.type} className=\"form-control\"  rows=\"5\"/>\n                                                    {errors.subcomment ? <span className=\"span-tooltip\">{errors.subcomment.message}</span> : null}\n                                                </FormGroup>\n                                            </Col>\n                                        </Row>\n                                    </CardBody>\n                                    <CardFooter>\n                                        <Button style={{ width: \"49.5%\" }} color=\"primary\" type={\"submit\"} className=\"mr-1\">Submit Comment</Button>\n                                        <Button style={{ width: \"49.5%\" }} color=\"light\" onClick={resetFormAndClose}>Cancel/Close</Button>\n                                    </CardFooter>\n                                </Form>\n                            </Card>\n                        </Col>\n                    </Container>\n                </Sheet.Content>\n                </Sheet.Container>\n\n                <Sheet.Backdrop />\n            </Sheet>\n        </Fragment>\n    );\n}\nconst RenderEmojiLogic = ({ setReactionCount, reactions, comments }) => {\n\n    const [emojiData, emojiArrayResponded] = useState([]);\n    const [ready, setReady] = useState(false);\n\n    useEffect(() => {\n        const customEmojiArr = [];\n        let count = 0;\n\n        for (const key in reactions) {\n            const element = reactions[key];\n            \n            count += element;\n            \n            if (element > 0) {\n                customEmojiArr.push(key);\n            }\n        }\n        setReactionCount(count);\n        emojiArrayResponded(customEmojiArr);\n        setReady(true);\n    }, []);\n\n    console.log(\"emojiData inner component ./:\", emojiData);\n\n\n    useEffect( () => {\n        console.log(\"emojiData update or unmount\", reactions, comments);\n\n        const customEmojiArr = [];\n\n        for (const key in reactions) {\n            const element = reactions[key];\n\n            if (element > 0) {\n                customEmojiArr.push(key);\n            }\n        }\n        console.log(\"customEmojiArr POSSIBLE Problem --- :\", customEmojiArr);\n\n        emojiArrayResponded(customEmojiArr);\n    }, [reactions]);\n\n    return (\n        <ul className=\"product-color m-t-15\">\n            {emojiData.map((reaction, index) => {\n                console.log(\"re-render reaction...\", reaction);\n                switch (reaction) {\n                    case \"partying\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/partying.gif\")} /></li>;\n                        break;\n                    case \"screaming\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/screaming.gif\")} /></li>;\n                        break;\n                    case \"steaming\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/steaming.gif\")} /></li>;\n                        break;\n                    case \"sunglasses\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/sunglasses.gif\")} /></li>;\n                        break;\n                    case \"tearsOfJoy\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/tearsOfJoy.gif\")} /></li>;\n                        break;\n                    case \"vomitting\":\n                        return <li key={reaction + index} className=\"bg-dark emoji-container-forum-react\"><img className=\"gif-reaction\" src={require(\"../../../../../../../assets/gifs/vomitting.gif\")} /></li>;\n                        break;\n                    default:\n                        return null;\n                        break;\n                }\n            })}\n        </ul>\n    );\n}\nexport default {\n    renderSignedinUserPicVideo,\n    addNewComment,\n    renderPicVideoComment,\n    RenderModalSheetAddComment,\n    ForumCommentAddHashtagsOptionHelper,\n    RenderEmojiLogic,\n    RenderPopoverEmojiLogic\n};"]},"metadata":{},"sourceType":"module"}